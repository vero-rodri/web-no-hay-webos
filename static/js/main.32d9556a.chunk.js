(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e){e.exports={default:"T\xedpico",punctual:"D\xeda D",periodic:"Paso a paso",expiration:"Contra el crono"}},167:function(e){e.exports={default:"Sin restricciones, cada participante lo superar\xe1 cuando y donde pueda",punctual:"Todos los participantes deber\xe1n superar el reto en la misma fecha",periodic:"Habr\xe1 que realizar una prueba peri\xf3dica durante un per\xedodo de tiempo determinado",expiration:"El reto se deber\xe1 haber completado antes de la fecha l\xedmite marcada"}},175:function(e,t,a){e.exports=a(327)},184:function(e,t,a){},327:function(e,t,a){"use strict";a.r(t);a(119);var n=a(0),r=a.n(n),l=a(17),s=a.n(l),i=(a(182),a(183),a(184),a(5)),o=a(6),c=a(8),m=a(7),u=a(9),d=a(43),h=a(3),g=a(11),p=a(338),f=a(171),v=a(345),b=a(347),E=a(346),y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=a.props.name;a.props.handleChange(t,e.target.value)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.value,n=e.placeholder,l=e.errors,s=e.onblur,i=e.type,o=e.onChange,c=l&&l.length>0;return r.a.createElement(f.a,{margin:{top:"medium"}},r.a.createElement(v.a,{margin:{bottom:"xsmall"}},t),r.a.createElement(E.a,Object.assign({className:"bg-white",align:"center",margin:"",onChange:o,value:a},i?{type:i}:null,n?{placeholder:n}:null,s?{onBlur:s}:null)),c&&l.map(function(e,t){return r.a.createElement(v.a,{key:t,size:"small",color:"status-error",margin:{top:"xsmall",left:"small"}},e)}))}}]),t}(n.Component),C=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/,N=/^(([^<>()[\].,;:\s@\u201c]+(\.[^<>()[\].,;:\s@\u201c]+)*)|(\u201c.+\u201c))@(([^<>()[\].,;:\s@\u201c]+\.)+[^<>()[\].,;:\s@\u201c]{2,})$/i,O=function(e,t,a){return(n=t)&&N.test(n)?a():a(new Error("formato de email no v\xe1lido"));var n},w=function(e,t,a){return(n=t)&&C.test(n)?a():a(new Error("formato de contrase\xf1a no v\xe1lido"));var n},j=function(e,t,a){return t&&t.length<49?a():a(new Error("m\xe1ximo 50 caracteres"))},S=function(e,t,a){return t&&new Date(t)>new Date?a():a(new Error("elige una fecha futura!"))},k=function(e,t,a){return t&&t>0&&t<365?a():a(new Error("la duraci\xf3n tiene que estar entre 1 y 365 d\xedas"))},x=function(e,t,a){return t&&t>0&&t<30?a():a(new Error("la periodicidad tiene que estar entre 1 y 30 d\xedas"))},M=function(e,t,a){if(t&&t.target){var n=t.target.files;n[0]?a(n[0].size>1e7?"m\xe1ximo tama\xf1o: 10MB":void 0):a()}else a()};function U(e){return e&&e.target?{value:e.target.value}:{value:e}}function F(e){return{target:e.target}}var I=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.label,n=e.name,l=t.getFieldProps,s=t.getFieldError;return r.a.createElement(f.a,{margin:{top:"medium"}},r.a.createElement(v.a,{margin:{bottom:"xsmall"}},a),r.a.createElement(E.a,Object.assign({type:"file"},l(n,{initialValue:"",getValueProps:U,getValueFromEvent:F,rules:[M]}))),s(n)&&s(n).map(function(e,t){return r.a.createElement(v.a,{key:t,size:"small",color:"status-error",margin:{top:"xsmall",left:"small"}},e)}))}}]),t}(n.Component),A=a(163),L=a.n(A),D=function(){return L()({validateMessages:{required:function(e){return"Campo requerido"}}})},T=a(27),R=a.n(T),P=a(339),V=JSON.parse(localStorage.getItem("current-user")||"{}"),q=new P.a(V),z=R.a.create({baseURL:"http://localhost:3001",withCredentials:!0}),J={register:function(e,t){var a=new FormData;return Object.keys(e).forEach(function(n){n===t&&e[n]?a.append(n,e[n].target.files[0]):a.append(n,e[n])}),z.post("/register",a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){return e.data})},authenticate:function(e){return z.post("/authenticate",e).then(function(t){return console.log("el usuario logado es ",t.data),e=t.data,localStorage.setItem("current-user",JSON.stringify(e)),q.next(e),e})},logout:function(){return z.get("/logout").then(function(e){return V={},localStorage.removeItem("current-user"),e.data})},onUserChange:function(){return q.asObservable()},getUserDetail:function(e){return z.get("/user/".concat(e)).then(function(e){return e.data})},getSession:function(){return z.get("/session").then(function(e){return e.data})}},W=a(34),B=a(35),Y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={errors:{},isRegistered:!1},a.handleSubmit=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,t){e&&Object.keys(e).length>0||J.register(t,"fileProfile").then(function(){return a.setState({isRegistered:!0})},function(e){var t=e.response.data.error;a.setState({errors:Object(h.a)({},a.state.errors,t.errors)})})})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(this.state.isRegistered)return r.a.createElement(d.a,{to:"/login"});var e,t=this.props.form,a=t.getFieldProps,n=t.getFieldError,l=this.state.errors;return r.a.createElement("div",{className:"main-bg"},r.a.createElement("div",null,r.a.createElement("img",{className:"logo register",src:(e="logo",B[e]),alt:"logo"})),r.a.createElement("div",{className:"intro-form-container"},r.a.createElement(p.a,{onSubmit:this.handleSubmit},r.a.createElement(y,Object.assign({label:"Nombre:",placeholder:"Daenerys",type:"search"},a("nickName",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0}]}),{errors:n("nickName")})),r.a.createElement(y,Object.assign({label:"Email:",placeholder:"reinadedragones@example.com",type:"search"},a("email",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:O}]}),{errors:n("email")})),r.a.createElement(y,Object.assign({label:"Contrase\xf1a:",placeholder:"123Abc",type:"password"},a("password",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:w}]}),{errors:n("password")})),r.a.createElement(I,{label:"Imagen de perfil:",form:t,name:"fileProfile"}),l&&Object.keys(l).length>0&&Object.keys(l).map(function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement(v.a,{alignSelf:"center",size:"small",color:"status-error",margin:{top:"medium",left:"small"}},(a=l[e].message,W[a])));var a}),r.a.createElement(b.a,{style:{height:"45px"},className:"login-btn",type:"submit",primary:!0,label:"Registrarme",margin:{top:"medium",bottom:"small"},fill:!0})),r.a.createElement(v.a,{size:"small",alignSelf:"center"},"\xbfYa est\xe1s registrado?",r.a.createElement(g.b,{to:"/login",style:{textDecoration:"none",fontWeight:"bold",color:"#404040"}},"  Entra"))))}}]),t}(n.Component),_=D()(Y),H=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={errors:{},isAuthenticated:!1},a.handleSubmit=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,t){e&&Object.keys(e).length>0||J.authenticate(t).then(function(){return a.setState({isAuthenticated:!0})},function(e){var t=e.response.data.error;a.setState({errors:Object(h.a)({},a.state.errors,t)})})})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(this.state.isAuthenticated)return r.a.createElement(d.a,{to:"/board"});var e,t=this.props.form,a=t.getFieldProps,n=t.getFieldError,l=this.state.errors;return r.a.createElement("div",{className:"main-bg"},r.a.createElement("div",null,r.a.createElement("img",{className:"logo login",src:(e="logo",B[e]),alt:"logo"})),r.a.createElement("div",{className:"intro-form-container"},r.a.createElement(p.a,{onSubmit:this.handleSubmit},r.a.createElement(y,Object.assign({label:"Email:",placeholder:"reinadedragones@example.com",type:"search"},a("email",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0}]}),{errors:n("email")})),r.a.createElement(y,Object.assign({label:"Contrase\xf1a:",placeholder:"123Abc",type:"password"},a("password",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0}]}),{errors:n("password")})),l&&Object.keys(l).length>0&&Object.keys(l).map(function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement(v.a,{alignSelf:"center",size:"small",color:"status-error",margin:{top:"medium",left:"small"}},(a=l[e],W[a])));var a}),r.a.createElement(b.a,{style:{height:"45px"},className:"login-btn",type:"submit",primary:!0,label:"Iniciar sesi\xf3n",margin:{top:"medium",bottom:"small"},fill:!0})),r.a.createElement(v.a,{size:"small",alignSelf:"center"},"\xbfA\xfan no tienes una cuenta?",r.a.createElement(g.b,{to:"/register",style:{textDecoration:"none",fontWeight:"bold",color:"#404040"}},"  Reg\xedstrate"))))}}]),t}(n.Component),G=D()(H),$=a(47),K=R.a.create({baseURL:"http://localhost:3001",withCredentials:!0}),Z={getUserChallengesByUser:function(e){return console.log("en UC por user"),K.get("users/".concat(e,"/user-challenges")).then(function(e){return e.data})},getChallengesByUser:function(e){return console.log("en Challenge por user"),K.get("users/".concat(e,"/challenges")).then(function(e){return e.data})},getUsers:function(){return console.log("en servicio obteniendo listado users"),K.get("users").then(function(e){return e.data})}},Q=a(348),X=55,ee=15,te={challenge:"Reto",userChallenge:"UC"},ae={Reto:"challenge",UC:"userChallenge"},ne={views:"+ Vistos",likes:"+ Likes",createDate:"+ Recientes"},re={"+ Vistos":"views","+ Likes":"likes","+ Recientes":"createDate"},le=2,se="0.15",ie=/\.(jpg|jpeg|png|JPG|JPEG|PNG)$/,oe=/\.(avi|gif|mp4|wmv|webm|ogv|flv|mpg)$/,ce=a(36),me=a.n(ce),ue=(a(46),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},isRedirectedToItem:!1},a.userSubscription=void 0,a.onRedirectToItem=function(){a.setState(Object(h.a)({},a.state,{isRedirectedToItem:!0}))},a.onDeleteEvidence=function(){a.props.onDeleteEvidence(a.props.item.id)},a.onShowModal=function(){"profile"===a.props.origin&&a.props.item.userId.id===a.state.user.id?a.onRedirectToItem():a.props.onShowModal(a.props.order,a.props.item.id)},a.createInfoCard=function(e,t){switch(t){case"challenge":return{text:e.title,date:e.createdAt,owner:e.owner.nickName,likes:e.likes,views:e.views,photo:e.photo};case"userChallenge":return{text:e.challengeId.title,date:e.evidences.length?e.evidences[0].createdAt:void 0,owner:e.userId.nickName,ownerId:e.userId.id,likes:e.likes,views:e.views,photo:e.evidences.length?e.evidences[0].file:void 0};case"evidence":return{text:e.comments,date:e.createdAt,owner:void 0,ownerId:void 0,likes:void 0,views:void 0,photo:e.file}}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e={};this.userSubscription=J.onUserChange().subscribe(function(t){e=t}),this.setState(Object(h.a)({},this.state,{user:e}))}},{key:"componentWillUnmount",value:function(){this.userSubscription.unsubscribe()}},{key:"render",value:function(){var e=this.state,t=e.isRedirectedToItem,a=(e.isRedirectedToUser,this.props),n=a.item,l=a.type,s=a.origin,i=a.onShowModal,o=this.createInfoCard(n,l),c=o.text,m=o.date,u=o.owner,h=o.ownerId,p=o.likes,v=o.views,b=o.photo;if(t){if("challenge"===l)return r.a.createElement(d.a,{push:!0,to:"/challenges/".concat(n.id)});if("profile"===s)return r.a.createElement(d.a,{push:!0,to:"/user-challenges/".concat(n.id)})}return r.a.createElement(Q.a,{key:n.id,anchor:"center",className:"card-content mx-1"},r.a.createElement(f.a,null,r.a.createElement("div",{className:"card"},!b&&r.a.createElement("span",{className:"card-img-top img-card-size",onClick:this.onRedirectToItem},r.a.createElement("h6",{className:"h-100 m-0 d-flex align-items-center"}," CLIKEAME PARA SUBIR TU LOGRO")),b&&b.match(oe)&&r.a.createElement("video",{className:"video-card",width:"125",height:"80",onClick:i?this.onShowModal:this.onRedirectToItem},r.a.createElement("source",{src:b,type:"video/ogg"})),b&&b.match(ie)&&r.a.createElement("img",{src:b,className:"card-img-top img-card-size",alt:"",onClick:i?this.onShowModal:this.onRedirectToItem}),r.a.createElement("div",{className:"card-body m-0 p-0 text-center"},"challenge"!==s&&r.a.createElement("span",{className:"m-0","data-container":"body","data-toggle":"popover","data-placement":"bottom","data-content":c},r.a.createElement("u",null,function(e){return e.length>10?"".concat(e.slice(0,10)," [...]"):e}(c))),r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-7 text-left m-0 pl-2 align-items-end d-flex"},"profile"!==s&&"evidence"!==l&&r.a.createElement(g.b,{to:"/profile/".concat(h)},r.a.createElement("p",{className:"m-0 height-line"},r.a.createElement("small",null,r.a.createElement("strong",null,u)))),("evidence"===l||"profile"===s)&&r.a.createElement("p",{className:"m-0 height-line"},r.a.createElement("small",{className:"mx-1"},r.a.createElement(me.a,{className:"",format:"DD/MM/YYYY"},m)))),r.a.createElement("div",{className:"col-5 text-left p-0 pl-2 m-0"},"evidence"!==l&&("board"===s||"profile"===s)&&r.a.createElement("p",{className:"m-0 height-line"},r.a.createElement("small",null,r.a.createElement("i",{className:"mx-1 fas fa-thumbs-up fa-xs"}),p)),"evidence"!==l&&("board"===s||"profile"===s)&&r.a.createElement("p",{className:"m-0 height-line"},r.a.createElement("small",null,r.a.createElement("i",{className:"mx-1 fas fa-eye fa-xs"}),v)),"evidence"===l&&r.a.createElement("button",{className:"p-0 mx-3",onClick:this.onDeleteEvidence},r.a.createElement("i",{className:"fas fa-trash-alt text-danger"}))),r.a.createElement("div",{className:"col-5 text-left p-0 pl-2 m-0"}))))))}}]),t}(n.Component)),de=function(e){var t=e.items,a=e.textAlternative,n=e.type,l=e.origin,s=e.onDeleteEvidence,i=e.onShowModal;return"challenge"===n?r.a.createElement("div",{className:"col cards-scroll user-challenge-scroll"},r.a.createElement("div",{className:"cards-scroll mx-1"},t.length?t.map(function(e,t){return r.a.createElement(ue,{key:t,item:e,origin:l,order:t,type:n})}):r.a.createElement("h6",{className:"text-center m-2 w-100"},a))):"evidence"===n?r.a.createElement("div",{className:"col cards-scroll user-challenge-scroll"},r.a.createElement("div",{className:"cards-scroll mx-1"},t.length?t.map(function(t,a){return r.a.createElement(ue,{key:a,item:t,origin:l,order:a,type:n,onDeleteEvidence:function(e){return s(e)},onShowModal:function(e,t){return i(e,t)},onOrderModal:e.onOrderModal})}):r.a.createElement("h6",{className:"text-center m-2 w-100"},a))):"userChallenge"===n?r.a.createElement("div",{className:"col cards-scroll user-challenge-scroll"},r.a.createElement("div",{className:"cards-scroll mx-1"},t.length?t.map(function(e,t){return r.a.createElement(ue,{key:t,item:e,origin:l,order:0,type:n,onShowModal:function(e,t){return i(e,t)}})}):r.a.createElement("h6",{className:"text-center m-2 w-100"},a))):void 0},he=function(e){return r.a.createElement("div",{className:"row py-2 my-1 scroll-container"},r.a.createElement(de,e))},ge="current-user",pe=r.a.createContext(),fe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:JSON.parse(localStorage.getItem(ge)||"{}")},a.userChangeSubscription={},a.handleUserChange=function(e){a.setState({user:e})},a.isAuthenticated=function(){return a.state.user&&a.state.user.email},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.userChangeSubscription=J.onUserChange().subscribe(function(t){return e.setState({user:t})})}},{key:"componentWillUnmount",value:function(){this.userChangeSubscription.unsubscribe()}},{key:"render",value:function(){return r.a.createElement(pe.Provider,{value:{user:this.state.user,onUserChanged:this.handleUserChange,isAuthenticated:this.isAuthenticated}},this.props.children)}}]),t}(n.Component),ve=function(e){return function(t){return r.a.createElement(pe.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,a))})}},be=a(344),Ee=a(340),ye=function(e,t,a){var n=[];switch(a){case"likes":n=e.sort(function(e,t){return t.likes-e.likes});break;case"views":n=function(e){return e.sort(function(e,t){return t.views-e.views})}(e);break;case"createDate":n=function(e){return e.sort(function(e,t){return Date.parse(t.createdAt)-Date.parse(e.createdAt)>0?1:-1})}(e)}return n},Ce=function(e){var t=e.children;return Object(l.createPortal)(r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-app"},t)),document.querySelector("body"))},Ne=function(e){var t=e.evidences,a=e.order,n=function(e){return e===a&&"active"};return r.a.createElement("div",{id:"carouselExampleControls",className:"carousel slide","data-ride":"carousel"},r.a.createElement("div",{className:"carousel-inner"},t.map(function(e,t){return function(e,t){return e.file.match(ie)?r.a.createElement("div",{className:"crsl-container carousel-item ".concat(n(t)),key:t},r.a.createElement("img",{className:"crsl-img",src:e.file,alt:"slide ".concat(t)}),r.a.createElement(me.a,{className:"h6",format:"DD/MM/YYYY"},e.createdAt),r.a.createElement("div",null,e.comments)):e.file.match(oe)?r.a.createElement("div",{className:"crsl-container carousel-item ".concat(n(t)),key:t},r.a.createElement("video",{key:t,className:"crsl-img",width:"100%",controls:!0},r.a.createElement("source",{src:e.file,type:"video/ogg"}))):void 0}(e,t)})),r.a.createElement("a",{className:"carousel-control-prev",href:"#carouselExampleControls",role:"button","data-slide":"prev"},r.a.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Previous")),r.a.createElement("a",{className:"carousel-control-next",href:"#carouselExampleControls",role:"button","data-slide":"next"},r.a.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Next")))},Oe=function(e){var t=e.title,a=e.propAvatar,n=e.propNickname,l=e.evidences,s=e.modalOrder,i=e.onShowModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-2 modal-col"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("div",{className:"mb-1 pr-5 align-self-end"},r.a.createElement("h5",null,t),r.a.createElement("div",{className:"mt-3"},r.a.createElement("span",null,r.a.createElement("small",null,"Reto de ")),r.a.createElement("img",{className:"rounded-circle avatar-user ml-1",src:a,alt:n}),r.a.createElement("span",{className:"mx-1 pl-1"},r.a.createElement("strong",null,n)))),r.a.createElement("div",{className:"modal-close",onClick:i},r.a.createElement("i",{className:"fas fa-times-circle"})))),r.a.createElement("div",{className:"col-8 modal-col"},r.a.createElement(Ne,{evidences:l,order:s})))},we=ve(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={userId:a.props.match.params.userId||a.props.user.id,userChallengesInProcess:[],userChallengesFinished:[],challenges:[],optionUserChallengeInProcessFiltered:ne.createDate,optionUserChallengeFinishedFiltered:ne.createDate,optionChallengeFiltered:ne.createDate,showModal:!1,itemToShow:{},modalOrder:0},a.onShowModal=function(e,t){var n=a.state.userChallengesFinished.filter(function(e){return e.id===t}),r=a.state.userChallengesInProcess.filter(function(e){return e.id===t}),l=[];l=0!==n.length?n:r,a.setState(Object(h.a)({},a.state,{showModal:!a.state.showModal,modalOrder:e>=0?e:a.state.modalOrder,itemToShow:l[0]}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.userId,a=Z.getChallengesByUser(t),n=Z.getUserChallengesByUser(t);Promise.all([a,n]).then(function(t){var a=Object($.a)(t,2),n=a[0],r=a[1];console.log("los UC finished son ",r),console.log("los CHALL son ",n),e.setState(Object(h.a)({},e.state,{challenges:n,userChallengesFinished:r.filter(function(e){return e.isFinished}),userChallengesInProcess:r.filter(function(e){return!e.isFinished})}))},function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.challenges,n=t.modalOrder,l=t.itemToShow,s=t.userChallengesInProcess,i=t.userChallengesFinished,o=t.optionChallengeFiltered,c=t.optionUserChallengeInProcessFiltered,m=t.optionUserChallengeFinishedFiltered;return r.a.createElement("div",{className:"container my-3"},this.state.showModal&&r.a.createElement(Ce,null,r.a.createElement(Oe,{title:l.challengeId.title,propAvatar:l.userId.avatarURL,propNickname:l.userId.nickName,evidences:l.evidences,modalOrder:n,onShowModal:this.onShowModal})),r.a.createElement("div",{className:"row justify-content-between align-items-center mx-0 mb-0 mt-2"},r.a.createElement("h6",{className:"m-0"},"Logros en proceso:"),r.a.createElement("div",{className:"col-5"},r.a.createElement(be.a,null,r.a.createElement(Ee.a,{className:"p-1",placeholder:"Ordenar por",options:Object.values(ne),value:c,size:"small",onChange:function(t){e.setState({optionUserChallengeInProcessFiltered:t.option})}})))),r.a.createElement(he,{items:ye(s,0,re[c]),type:"userChallenge",origin:"profile",textAlternative:"Ya est\xe1s tardando en echarle Webos y estrenar este \xe1rea ...",onShowModal:this.onShowModal}),r.a.createElement("div",{className:"row justify-content-between align-items-center mx-0 mb-0 mt-2"},r.a.createElement("h6",{className:"m-0"},"Logros realizados:"),r.a.createElement("div",{className:"col-5"},r.a.createElement(be.a,null,r.a.createElement(Ee.a,{className:"p-1",placeholder:"Ordenar por",options:Object.values(ne),value:m,size:"small",onChange:function(t){e.setState({optionUserChallengeFinishedFiltered:t.option})}})))),r.a.createElement(he,{items:ye(i,0,re[m]),type:"userChallenge",origin:"profile",textAlternative:"Ya est\xe1s tardando en echarle Webos y estrenar este \xe1rea ...",onShowModal:this.onShowModal}),r.a.createElement("div",{className:"row justify-content-between align-items-center mx-0 mb-0 mt-2"},r.a.createElement("h6",{className:"m-0"},"Retos creados:"),r.a.createElement("div",{className:"col-5"},r.a.createElement(be.a,null,r.a.createElement(Ee.a,{className:"p-1",placeholder:"Ordenar por",options:Object.values(ne),value:o,size:"small",onChange:function(t){e.setState({optionChallengeFiltered:t.option})}})))),r.a.createElement(he,{items:ye(a,0,re[o]),type:"challenge",origin:"profile",textAlternative:"\xa1Venga! an\xedmate y lanza alg\xfan reto!"}))}}]),t}(n.Component)),je=a(349),Se=R.a.create({baseURL:"http://localhost:3001",withCredentials:!0}),ke=[],xe=JSON.parse(localStorage.getItem("current-challenges")||"[]"),Me=JSON.parse(localStorage.getItem("current-user-challenges")||"[]"),Ue=new P.a(xe),Fe=new P.a(ke),Ie=new P.a(Me),Ae=function(){return Se.get("/challenges").then(function(e){return xe=e.data,localStorage.setItem("current-challenges",JSON.stringify(xe)),Ue.next(xe),xe})},Le=function(){return Se.get("/user-challenges").then(function(e){return Me=e.data,localStorage.setItem("current-user-challenges",JSON.stringify(Me)),Ie.next(Me),Me})},De={getChallenges:Ae,getChallengeDetail:function(e){return Se.get("/challenges/".concat(e)).then(function(e){return e.data})},createChallenge:function(e,t){var a=new FormData;return Object.keys(e).forEach(function(n){n===t&&e[n]?a.append(n,e[n].target.files[0]):a.append(n,e[n])}),Se.post("/challenges",a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){return Ae(),e.data})},getUserChallenges:Le,getUserChallengeDetail:function(e){return Se.get("/user-challenges/".concat(e)).then(function(e){return ke=e.data,Fe.next(ke),ke})},onChallengesChange:function(){return Ue.asObservable()},onUserChallengesChange:function(){return Ie.asObservable()},onUsersChallengeDetailChange:function(){return Fe.asObservable()},createUserChallenge:function(e){return Se.post("/challenges/".concat(e,"/user-challenges")).then(function(e){return e.data})},updateUserChallenge:function(e,t){return Se.post("/user-challenges/".concat(e),{isFinished:t}).then(function(e){return e.data})},addChallengeToLikes:function(e){return Se.post("/challenges/".concat(e,"/likes")).then(function(e){return Ae().then(function(){return console.log("fetch challenges")}),e.data})},removeChallengeFromLikes:function(e){return Se.delete("/challenges/".concat(e,"/likes")).then(function(e){return Ae().then(function(){return console.log("fetch challenges")}),e.data})},addUserChallengeToLikes:function(e){return Se.post("/user-challenges/".concat(e,"/likes")).then(function(e){return Le().then(function(){return console.log("fetch userChallenges")}),e.data})},removeUserChallengeFromLikes:function(e){return Se.delete("/user-challenges/".concat(e,"/likes")).then(function(e){return Le().then(function(){return console.log("fetch userChallenges")}),e.data})},addViewToChallenge:function(e){return Se.post("/challenges/".concat(e,"/views")).then(function(e){return e.data})},addViewToUserChallenge:function(e){return Se.post("/user-challenges/".concat(e,"/views")).then(function(e){return e.data})},createEvidence:function(e,t,a){var n=new FormData;return Object.keys(e).forEach(function(a){a===t&&e[a]?n.append(a,e[a].target.files[0]):n.append(a,e[a])}),Se.post("/user-challenges/".concat(a,"/evidences"),n,{headers:{"content-type":"multipart/form-data"}}).then(function(e){return e.data})},addParticipantToChallenge:function(e){return Se.post("challenges/".concat(e,"/new-participant")).then(function(e){return e.data})},getUserChallengesFinishedByChallenge:function(e){return Se.get("challenges/".concat(e,"/user-challenges")).then(function(e){return e.data})}},Te=a(72),Re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.handleMenuToggle=function(){console.log("mnajejador TOGGLLEEEEE ",a.state.isOpen),a.setState({isOpen:!a.state.isOpen})},a.handleChange=function(e){console.log("ONCHANGEE ",a.state.isOpen),a.props.handleChangeUsers(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(Te.a,{options:this.props.options,menuIsOpen:this.state.isOpen,isMulti:!0,isSearchable:!0,onMenuClose:this.handleMenuToggle,onMenuOpen:this.handleMenuToggle,onChange:this.props.handleChange,placeholder:this.props.placeholder})}}]),t}(n.Component),Pe=R.a.create({baseURL:"http://localhost:3001",withCredentials:!0}),Ve=JSON.parse(localStorage.getItem("current-user-challenges-pending")||"[]"),qe=new P.a(Ve),ze={createUserChallengesByNotifications:function(e){return Pe.post("/user-challenges/create-notifications",e).then(function(e){return e.data})},getUserChallengesPending:function(){return Pe.get("/user-challenges/pending").then(function(e){var t=e.data;return localStorage.setItem("current-user-challenges-pending",JSON.stringify(t)),qe.next(t),t})},onUserChallengesPendingChange:function(){return qe.asObservable()}},Je=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={user:{},challenge:{},userChallenges:[],isAlreadyJoined:!1,isJoinedNow:"",optionFiltered:ne.likes,showModalEvidences:!1,showModalSendChallenge:!1,itemToShow:{},modalOrder:0,listUsers:[],usersSelected:[],comment:""},a.userSubscription=void 0,a.objectIdInArray=function(e,t){var a=JSON.stringify(e);return t.map(function(e){return JSON.stringify(e.userId.id)}).includes(a)},a.onClickJoin=function(){De.createUserChallenge(a.state.challenge.id).then(function(e){return a.setState(Object(h.a)({},a.state,{isJoinedNow:e.id}))},function(e){return console.log(e)})},a.onClickChallengeOthers=function(){console.log("retar a otros"),Z.getUsers().then(function(e){a.setState(Object(h.a)({},a.state,{showModalSendChallenge:!a.state.showModalSendChallenge,listUsers:e.filter(function(e){return JSON.stringify(a.state.user.id)!==JSON.stringify(e.id)})}))})},a.onHideModalSendChallenge=function(){a.setState(Object(h.a)({},a.state,{showModalSendChallenge:!1}))},a.countUserChallenges=function(){return a.state.challenge.userChallenges?a.state.challenge.userChallenges.length:0},a.countUserChallengesFinished=function(){return a.state.challenge.userChallenges?a.state.challenge.userChallenges.filter(function(e){return e.Finished}).length:0},a.createListAvatarsUserChallenges=function(){var e=a.state.userChallenges;if(a.state.userChallenges)return a.state.userChallenges.slice(0,le).map(function(t,a,n){return a===n.length-1&&e.length>n.length?r.a.createElement("li",{key:a,className:"avatars-others"},r.a.createElement("span",{className:"avatars-others"},"+",1+e.length-n.length)):r.a.createElement("li",{key:a,className:"avatars-item"},r.a.createElement("img",{src:t.userId.avatarURL,className:"avatars-img",alt:"img-".concat(t.userId.nickName)}))})},a.onShowModalEvidences=function(e,t){var n=a.state.userChallenges.filter(function(e){return e.id===t});a.setState(Object(h.a)({},a.state,{showModalEvidences:!a.state.showModalEvidences,modalOrder:e>=0?e:a.state.modalOrder,itemToShow:n[0]}))},a.listUsersOptions=function(){return a.state.listUsers.map(function(e,t){return Object(h.a)({},e,{label:e.nickName,value:t})})},a.handleChangeUsersSelectedModal=function(e){console.log("\n\n\nel event target lleva ",e),a.setState(Object(h.a)({},a.state,{usersSelected:e}))},a.handleCommentModal=function(e){a.setState(Object(h.a)({},a.state,{comment:e.target.value}))},a.handleSubmitModal=function(e){e.preventDefault();var t={usersId:a.state.usersSelected.map(function(e){return e.id}),challengeId:a.state.challenge.id,message:a.state.comment};ze.createUserChallengesByNotifications(t).then(function(){console.log("userChallenges created ok"),a.setState(Object(h.a)({},a.state,{showModalSendChallenge:!1}))})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.userSubscription=J.onUserChange().subscribe(function(t){e.setState(Object(h.a)({},e.state,{user:t}))});var t=De.getChallengeDetail(this.props.match.params.challengeId),a=De.getUserChallengesFinishedByChallenge(this.props.match.params.challengeId);Promise.all([t,a]).then(function(t){var a=Object($.a)(t,2),n=a[0],r=a[1];e.setState(Object(h.a)({},e.state,{challenge:n,userChallenges:r}))}).catch(function(e){return console.log(e)})}},{key:"componentWillUnmount",value:function(){this.userSubscription.unsubscribe()}},{key:"render",value:function(){var e=this,t=this.state.challenge,a=t.photo,n=t.title,l=t.description,s=(t.isFinished,t.owner),i=t.likes,o=t.views,c=this.state,m=c.optionFiltered,u=c.userChallenges,h=c.user,g=(c.listUsers,c.ListUsersFiltered,c.modalOrder),f=c.itemToShow;return this.state.isJoinedNow?r.a.createElement(d.a,{to:"/user-challenges/".concat(this.state.isJoinedNow)}):r.a.createElement("div",{className:"d-flex flex-column m-0 p-0"},console.log(),this.state.showModalSendChallenge&&r.a.createElement(Ce,null,r.a.createElement("div",{className:" align-items-center"},r.a.createElement("div",{className:"modal-close",onClick:this.onHideModalSendChallenge},r.a.createElement("span",{className:"text-right w-100"},r.a.createElement("i",{className:"fas fa-times-circle"}))),r.a.createElement("div",{className:"py-3 text-center"},r.a.createElement("h5",null,"Lanza este reto a alg\xfan amigo!!")),r.a.createElement(p.a,{onSubmit:this.state.handleSubmitModal},r.a.createElement("div",{className:"py-3"},r.a.createElement(Re,{handleChange:this.handleChangeUsersSelectedModal,options:this.listUsersOptions(),value:this.state.usersSelected,placeholder:"Escoja uno o varios usuarios..."})),r.a.createElement("div",{className:"py-3"},r.a.createElement(je.a,{placeholder:"P\xedcalos con alg\xfan comentario...",value:this.state.comment,onChange:this.handleCommentModal})),r.a.createElement("div",{className:"d-flex justify-content-center py-3"},r.a.createElement(b.a,{className:"",type:"submit",primary:!0,label:"Notificar!",onClick:this.SendChallengeToUsers}))))),this.state.showModalEvidences&&r.a.createElement(Ce,null,r.a.createElement(Oe,{title:n,propAvatar:f.userId.avatarURL,propNickname:f.userId.nickName,evidences:f.evidences,modalOrder:g,onShowModal:this.onShowModalEvidences})),r.a.createElement("div",{className:"chl-det-header p-0"},r.a.createElement("img",{src:a,alt:n}),r.a.createElement("div",{className:"overlay p-0 container"},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row justify-content-around align-items-center my-2 mx-1"},r.a.createElement("p",{className:"m-0"},r.a.createElement("i",{className:"m-0 fas fa-thumbs-up fa-lg"})),r.a.createElement("h5",{className:"m-0"},i)),r.a.createElement("div",{className:"row justify-content-around align-items-center my-2 mx-1"},r.a.createElement("p",{className:"m-0"},r.a.createElement("i",{className:" m-0 fas fa-eye fa-lg"})),r.a.createElement("h5",{className:"m-0"},o)),r.a.createElement("div",{className:"row justify-content-around align-items-center my-2 mx-1"},r.a.createElement("p",{className:"m-0"},r.a.createElement("i",{className:" m-0 fas fa-users fa-lg"})),r.a.createElement("h5",{className:"m-0"},this.countUserChallenges())),r.a.createElement("div",{className:"row justify-content-around align-items-center my-2 mx-1"},r.a.createElement("p",{className:"m-0"},r.a.createElement("i",{className:" m-0 fas fa-trophy fa-lg"})),r.a.createElement("h5",{className:"m-0"},this.countUserChallengesFinished()))))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-12 mt-2 p-0"},r.a.createElement("h3",null,r.a.createElement("u",null,n)),r.a.createElement("span",null,l),r.a.createElement("p",{className:"m-0 text-right"},"Creado por:",r.a.createElement("img",{src:s&&s.avatarURL,className:"avatar-user rounded-circle ml-2 mr-1"}),r.a.createElement("span",{className:"font-weight-bold"},s&&s.nickName))),r.a.createElement("hr",{className:"my-1"}),r.a.createElement("div",{className:"col-12 m-0 d-flex flex-row justify-content-around"},r.a.createElement(b.a,{className:"py-1 px-2 m-1",type:"button",primary:!0,label:"Unirse al reto!",disabled:this.objectIdInArray(h.id,u),onClick:this.onClickJoin}),r.a.createElement(b.a,{className:"py-1 px-2 m-1",type:"button",primary:!0,label:"Retar a otros",onClick:this.onClickChallengeOthers})),r.a.createElement("h6",{className:"mt-3"},"Logros conseguidos por otros usuarios:"),r.a.createElement("div",{className:"row justify-content-between align-items-center my-1"},r.a.createElement("div",{className:"col"},r.a.createElement("ul",{className:"avatars"},this.createListAvatarsUserChallenges())),r.a.createElement("div",{className:"col-5"},r.a.createElement(be.a,null,r.a.createElement(Ee.a,{className:"p-1",placeholder:"Ordenar por",options:Object.values(ne),value:this.state.optionFiltered,size:"small",onChange:function(t){e.setState({optionFiltered:t.option})}})))),r.a.createElement(he,{items:ye(u,0,re[m]),type:"userChallenge",origin:"challenge",textAlternative:"No ha habido Webos a\xfan de hacer este reto...",onShowModal:this.onShowModalEvidences})))}}]),t}(n.Component),We=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=a.props.name;a.props.handleChange(t,e.target.value)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.value,n=e.placeholder,l=e.errors,s=e.onblur,i=e.type,o=e.onChange,c=l&&l.length>0;return r.a.createElement(f.a,{margin:{top:"medium"}},r.a.createElement(v.a,{margin:{bottom:"xsmall"}},t),r.a.createElement(je.a,Object.assign({align:"center",margin:"",onChange:o,value:a},i?{type:i}:null,n?{placeholder:n}:null,s?{onBlur:s}:null)),c&&l.map(function(e,t){return r.a.createElement(v.a,{key:t,size:"small",color:"status-error",margin:{top:"xsmall",left:"small"}},e)}))}}]),t}(n.Component),Be=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.errors,n=e.options,l=e.value,s=e.correlationNames,i=a&&a.length>0;return r.a.createElement(f.a,{margin:{top:"medium"}},r.a.createElement(v.a,{margin:{bottom:"xsmall"}},"Tipo de reto:"),r.a.createElement(Ee.a,{onChange:t,options:n,value:s[l],children:function(e){return s[e]}}),i&&a.map(function(e,t){return r.a.createElement(v.a,{key:t,size:"small",color:"status-error",margin:{top:"xsmall",left:"small"}},e)}))}}]),t}(n.Component),Ye=a(112),_e=a(167),He=Object.keys(Ye),Ge=function(e){return _e[e]},$e=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},errors:{},isCompleted:!1},a.userSubscription=void 0,a.handleSubmit=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,t){if(!(e&&Object.keys(e).length>0)){var n=Object(h.a)({},t,{owner:a.state.user.id});De.createChallenge(n,"fileChallenge").then(function(e){return a.setState({challengeId:e.id})},function(e){var t=e.response.data.error;a.setState({errors:Object(h.a)({},a.state.errors,t.errors)})})}})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.userSubscription=J.onUserChange().subscribe(function(t){e.setState(Object(h.a)({},e.state,{user:t}))})}},{key:"componentWillUnmount",value:function(){this.userSubscription.unsubscribe()}},{key:"render",value:function(){if(this.state.challengeId)return r.a.createElement(d.a,{to:"/challenges/".concat(this.state.challengeId)});var e=this.props.form,t=e.getFieldProps,a=e.getFieldError,l=e.setFieldsValue,s=this.state.errors;return r.a.createElement(f.a,{margin:"large"},r.a.createElement(p.a,{onSubmit:this.handleSubmit},r.a.createElement(y,Object.assign({label:"Nombre:",placeholder:"Un dibujo a tinta al d\xeda!",type:"search"},t("title",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:j}]}),{errors:a("name")})),r.a.createElement(I,{label:"Imagen:",form:e,name:"fileChallenge"}),r.a.createElement(We,Object.assign({label:"Descripci\xf3n:",placeholder:"Describe aqu\xed tu reto",type:"textarea"},t("description",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0}]}),{errors:a("description")})),r.a.createElement(Be,Object.assign({options:He},t("type",{initialValue:He[0],validateFirst:!0,rules:[{required:!0}]}),{correlationNames:Ye,onChange:function(e){l({type:e.value})},errors:a("type")})),"default"===e.getFieldValue("type")&&r.a.createElement(f.a,{margin:{left:"small",top:"small"}},r.a.createElement(v.a,{size:"small",color:"dark-2"},Ge(e.getFieldValue("type")))),"punctual"===e.getFieldValue("type")&&r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{margin:{left:"small",top:"small"}},r.a.createElement(v.a,{size:"small",color:"dark-2"},Ge(e.getFieldValue("type")))),r.a.createElement(y,Object.assign({label:"Fecha:",type:"date"},t("date",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:S}]}),{errors:a("date")}))),"periodic"===e.getFieldValue("type")&&r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{margin:{left:"small",top:"small"}},r.a.createElement(v.a,{size:"small",color:"dark-2"},Ge(e.getFieldValue("type")))),r.a.createElement(y,Object.assign({label:"Duraci\xf3n (en d\xedas):",type:"number"},t("duration",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:k}]}),{errors:a("duration")})),r.a.createElement(y,Object.assign({label:"Periodicidad (en d\xedas):",type:"number"},t("periodicity",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:x}]}),{errors:a("periodicity")}))),"expiration"===e.getFieldValue("type")&&r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{margin:{left:"small",top:"small"}},r.a.createElement(v.a,{size:"small",color:"dark-2"},Ge(e.getFieldValue("type")))),r.a.createElement(y,Object.assign({label:"Duraci\xf3n (en d\xedas):",type:"number"},t("duration",{initialValue:"",validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:k}]}),{errors:a("duration")}))),r.a.createElement(b.a,{type:"submit",primary:!0,label:"Crear reto",margin:{top:"medium",bottom:"small"},fill:!0}),s&&Object.keys(s).length>0&&Object.keys(s).map(function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement(v.a,{alignSelf:"center",size:"small",color:"status-error",margin:{top:"medium",left:"small"}},(a=s[e].message,W[a])));var a})))}}]),t}(n.Component),Ke=D()($e),Ze=R.a.create({baseURL:"http://localhost:3001",withCredentials:!0}),Qe={create:function(e,t){var a=new FormData;return Object.keys(e).forEach(function(n){n===t&&e[n]?a.append(n,e[n].target.files[0]):a.append(n,e[n])}),Ze.post("/challenges/".concat("","/user-challenges/").concat("","/evidences"),a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){return e.data})},getEvidencesList:function(e){return Ze.get("/user-challenges/".concat(e,"/evidences")).then(function(e){return e.data})},evidenceDelete:function(e,t){return Ze.delete("/user-challenges/".concat(e,"/evidences/").concat(t)).then(function(e){return e.data})}},Xe=function(e){return r.a.createElement("div",{className:"progress-bar-content"},r.a.createElement("div",{className:"progress-bar-second"}),r.a.createElement("div",{className:"progress-bar-progress",style:{backgroundImage:"linear-gradient(to left, white ".concat(e.gradient,"%, transparent 0%)")}}))},et=function(e){return B[e]},tt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={userChallenge:{},evidences:{},totalEvidences:1,errors:{},challengeOwner:{},isFinished:!1,isVisibleForm:!1,rangeValue:1,opacityHen:{opacity:"1"},opacityViking:{opacity:"0.15"},showModal:!1,modalOrder:0},a.onClickEvidenceForm=function(){a.setState(Object(h.a)({},a.state,{isVisibleForm:!a.state.isVisibleForm}))},a.onShowModal=function(e){a.setState(Object(h.a)({},a.state,{showModal:!a.state.showModal,modalOrder:e>=0?e:a.state.modalOrder}))},a.getProgressStatus=function(){var e=a.state.evidences.length/a.state.totalEvidences,t=a.state.isFinished;a.setState(Object(h.a)({},a.state,{rangeValue:e,opacityHen:{opacity:1===e?se:1-e},opacityViking:{opacity:0===e?se:e},isFinished:1===e}),function(){1===e&&a.state.isFinished!==t&&De.updateUserChallenge(a.state.userChallenge.id,a.state.isFinished).then(console.log("actualiza la API a ",a.state.isFinished)),1!==e&&a.state.isFinished!==t&&De.updateUserChallenge(a.state.userChallenge.id,a.state.isFinished).then(console.log("actualiza la API a ",a.state.isFinished))})},a.onDeleteEvidence=function(e){var t=a.state.evidences.filter(function(t){return e!==t.id});a.setState(Object(h.a)({},a.state,{evidences:t}),function(){a.getProgressStatus(),Qe.evidenceDelete(a.state.userChallenge.id,e)})},a.handleSubmit=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,t){var n=a.props.match.params.userChallengeId;e&&Object.keys(e).length>0||De.createEvidence(t,"fileEvidence",n).then(function(){a.setState({isVisibleForm:!1}),Qe.getEvidencesList(a.state.userChallenge.id).then(function(e){console.log(e),a.setState(Object(h.a)({},a.state,{evidences:e.reverse()})),a.getProgressStatus()})},function(e){var t=e.response.data.error;a.setState({errors:Object(h.a)({},a.state.errors,t.errors)})})})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;De.getUserChallengeDetail(this.props.match.params.userChallengeId).then(function(t){e.setState(Object(h.a)({},e.state,{userChallenge:t,evidences:t.evidences,isFinished:t.isFinished})),e.state.userChallenge.challengeId.periodicity&&e.setState(Object(h.a)({},e.state,{totalEvidences:e.state.userChallenge.challengeId.duration/e.state.userChallenge.challengeId.periodicity})),J.getUserDetail(t.challengeId.owner).then(function(t){e.setState(Object(h.a)({},e.state,{challengeOwner:t})),e.getProgressStatus()})})}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldProps,a=e.getFieldError,n=this.state,l=n.errors,s=n.userChallenge,i=n.evidences,o=n.totalEvidences,c=n.rangeValue,m=n.challengeOwner,u=n.isFinished,d=n.opacityHen,h=n.modalOrder,E=n.opacityViking,C=o-i.length;return r.a.createElement("div",{className:"container"},this.state.showModal&&r.a.createElement(Ce,null,r.a.createElement(Oe,{title:s.challengeId.title,propAvatar:s.userId.avatarURL,propNickname:s.userId.nickName,evidences:i,modalOrder:h,onShowModal:this.onShowModal})),s.challengeId&&!this.state.isVisibleForm&&r.a.createElement(g.b,{to:"/challenges/".concat(s.challengeId.id),className:"no-decoration"},r.a.createElement("div",{className:"challenge-summary row mx-2 px-3 justify-content-start"},r.a.createElement("div",{className:"col-6 p-0"},r.a.createElement("img",{className:"user-challenge-img",src:s.challengeId.photo,alt:s.challengeId.id})),r.a.createElement("div",{className:"col-6 p-0 challenge-descrp"},r.a.createElement("div",{className:"h6"},s.challengeId.title),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("small",null,"Creado por:")),r.a.createElement("div",{className:"my-1"},r.a.createElement("img",{className:"rounded-circle avatar-user",src:m.avatarURL,alt:m.nickName}),r.a.createElement("span",{className:"mx-1 pl-1"},r.a.createElement("strong",null,m.nickName))))))),r.a.createElement("div",{className:"d-flex justify-content-center mt-3"},r.a.createElement("p",{className:"pr-2"},"Unido al reto el"),r.a.createElement(me.a,{className:"h6",format:"DD/MM/YYYY"},s.createdAt)),r.a.createElement("h6",null,"Logros"),r.a.createElement("div",{className:"row py-2 scroll-container"},!u&&r.a.createElement("div",{className:"add-evidence-btn",onClick:this.onClickEvidenceForm},r.a.createElement("i",{className:"fas fa-plus-circle text-white"})),i&&0===i.length&&r.a.createElement("div",{className:"row ml-2"},r.a.createElement("div",{className:"default-card mr-2"}),r.a.createElement("div",{className:"default-card mr-2"})),i&&i.length>0&&r.a.createElement(de,{items:i,type:"evidence",origin:"userChallenge",textAlternative:"\xa1Vamos, comienza a postar tus retos!",onDeleteEvidence:this.onDeleteEvidence,onShowModal:this.onShowModal})),this.state.isVisibleForm&&r.a.createElement("div",null,r.a.createElement(f.a,{margin:"large"},r.a.createElement(p.a,{onSubmit:this.handleSubmit},r.a.createElement(I,{label:"Foto o video del logro:",form:e,name:"fileEvidence"}),r.a.createElement(y,Object.assign({label:"Comentarios:",placeholder:"Uff... ha sido dif\xedcil pero lo he conseguido!",type:"search"},t("comments",{initialValue:"",validateFirst:!0,validateTrigger:"onblur"}),{errors:a("comments")})),l&&Object.keys(l).length>0&&Object.keys(l).map(function(e,t){return r.a.createElement(f.a,{key:t},r.a.createElement(v.a,{alignSelf:"center",size:"small",color:"status-error",margin:{top:"medium",left:"small"}},(a=l[e].message,W[a])));var a}),r.a.createElement(b.a,{type:"submit",primary:!0,label:"A\xf1adir logro",margin:{top:"medium",bottom:"small"},fill:!0})))),r.a.createElement("div",{className:"d-flex justify-content-center mt-3 pt-2"},C>1&&r.a.createElement("p",{className:"mb-4"},"Faltan ",C," logros para superar el reto"),1===C&&r.a.createElement("p",{className:"mb-4"},"Falta ",C," logro para superar el reto"),0===C&&r.a.createElement("p",{className:"mb-4 h5 font-weight-bold text-danger"},"Reto superado!")),r.a.createElement("div",{className:"achievement"},r.a.createElement("div",null,r.a.createElement("img",{src:et("hen"),alt:"hen",style:d})),r.a.createElement("div",{className:"pl-1 pr-2"},r.a.createElement(Xe,{gradient:0===c?90:100-100*c})),r.a.createElement("div",null,r.a.createElement("img",{src:et("viking"),alt:"viking",style:E}))))}}]),t}(n.Component),at=D()(tt),nt=a(350),rt=function(e){return r.a.createElement("div",{className:"images-scroll px-1"},e.items.map(function(e){return r.a.createElement(Q.a,{key:e.id,anchor:"center",className:"images-content img-challenge-size mx-1"},r.a.createElement(f.a,{height:"small",width:"medium",className:"img-challenge-size"},r.a.createElement(nt.a,{className:"h-100 w-100 rounded img-board-chg",alignSelf:"center",key:e.id,src:e.photo})),r.a.createElement(g.b,{to:Object(h.a)({pathname:"/challenges/".concat(e.id)},e)},r.a.createElement("h5",{className:"link text-white text-center"},r.a.createElement("strong",null,e.title.toUpperCase()))))}))},lt=function(e){return r.a.createElement("h6",{className:"my-0 ml-2"},e.children)},st=function(e){var t=e.items,a=e.link,n=e.type,l=e.sort,s=e.label;return r.a.createElement("div",{className:"row align-items-center justify-content-between my-0 pr-3 pl-1"},r.a.createElement(lt,null,s),r.a.createElement(g.b,{to:{pathname:a,items:t,type:n,sort:l}},r.a.createElement("div",{className:"see-more-btn"},r.a.createElement("p",{className:"my-0 mx-1"},"ver"),r.a.createElement("i",{className:"fas fa-plus icon-plus my-0 mx-1"}))))},it=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={challenges:[],userChallenges:[],showModal:!1,itemToShow:{},modalOrder:0,userChallengesPending:[]},a.componentDidMount=function(){var e=De.getChallenges(),t=De.getUserChallenges(),n=ze.getUserChallengesPending();Promise.all([e,t,n]).then(function(e){var t=Object($.a)(e,3),n=t[0],r=t[1],l=t[2];return a.setState({challenges:n,userChallenges:r,userChallengesPending:l})})},a.topChallenges=function(){return a.state.challenges.sort(function(e,t){return t.likes-e.likes}).slice(0,10)},a.topUserChallenges=function(){return a.state.userChallenges.sort(function(e,t){return t.likes-e.likes}).slice(0,10)},a.latestUserChallenges=function(){return a.state.userChallenges.sort(function(e,t){return Date.parse(t.evidences[t.evidences.length-1].createdAt)-Date.parse(e.evidences[e.evidences.length-1].createdAt)>0?1:-1}).slice(0,10)},a.onShowModal=function(e,t){var n=a.state.userChallenges.filter(function(e){return e.id===t});a.setState(Object(h.a)({},a.state,{showModal:!a.state.showModal,modalOrder:e>=0?e:a.state.modalOrder,itemToShow:n[0]}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.challenges,a=e.userChallenges,n=e.itemToShow,l=e.modalOrder;return r.a.createElement("div",{className:"container mt-2"},this.state.showModal&&r.a.createElement(Ce,null,r.a.createElement(Oe,{title:n.challengeId.title,propAvatar:n.userId.avatarURL,propNickname:n.userId.nickName,evidences:n.evidences,modalOrder:l,onShowModal:this.onShowModal})),r.a.createElement(st,{label:"Top Retos",items:t,type:"challenge",sort:"likes",link:"/search",labelButton:"M\xe1s"}),r.a.createElement("div",{className:"row py-2"},r.a.createElement("div",{className:"col cards-scroll user-challenge-scroll mx-1 pl-1 pr-2"},r.a.createElement(rt,{items:this.topChallenges(),className:"content"}))),r.a.createElement(st,{label:"Logros m\xe1s recientes",items:a,link:"/search",type:"userChallenge",sort:"createDate",labelButton:"M\xe1s"}),console.log("\n\nultimoss ",this.latestUserChallenges()),a.length&&r.a.createElement(he,{items:this.latestUserChallenges(),type:"userChallenge",origin:"board",textAlternative:"Nadie a\xfan con Webos de subir su logro...",onShowModal:this.onShowModal}),r.a.createElement(st,{label:"Logros m\xe1s virales",items:a,link:"/search",type:"userChallenge",sort:"views",labelButton:"M\xe1s"}),a.length&&r.a.createElement(he,{items:this.topUserChallenges(),type:"userChallenge",origin:"board",textAlternative:"Nadie a\xfan con Webos de subir su logro...",onShowModal:this.onShowModal}))}}]),t}(n.Component),ot=a(341),ct=r.a.createContext(),mt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={search:""},a.handleSearchChange=function(e){a.setState(Object(h.a)({},a.state,{search:e}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(ct.Provider,{value:{search:this.state.search,onSearchChange:this.handleSearchChange}},this.props.children)}}]),t}(n.Component),ut=function(e){return function(t){return r.a.createElement(ct.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,a))})}},dt=ut(function(e){return r.a.createElement(f.a,{className:"my-search-bar",direction:"row",margin:"xsmall",align:"center",round:"large",border:!0,size:""},r.a.createElement(E.a,{plain:!0,placeholder:"Buscar...",value:e.search,onChange:function(t){e.onSearchChange(t.target.value)}}),r.a.createElement(b.a,{icon:r.a.createElement(ot.a,{size:"medium"})}))}),ht=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},userChallengesPending:[]},a.userSubscription={},a.usersChallengesPendingSubscription=void 0,a.handleLogout=function(){J.logout().then(function(){a.props.history.push("/login")})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.userSubscription=J.onUserChange().subscribe(function(t){e.setState({user:t})}),this.userChallengesPendingSubscription=ze.onUserChallengesPendingChange().subscribe(function(t){e.setState({userChallengesPending:t})})}},{key:"componentWillUnmount",value:function(){this.userSubscription.unsubscribe(),this.userChallengesPendingSubscription.unsubscribe()}},{key:"render",value:function(){var e,t=this.state,a=t.user,n=t.userChallengesPending,l=this.props.history.location.pathname;return"/login"===l||"/register"===l?null:r.a.createElement("div",{className:"pos-f-t"},r.a.createElement("nav",{className:"navbar navbar-dark nav-bar-bg"},r.a.createElement("div",{className:"profile-container"},r.a.createElement(g.b,{to:"/profile"},r.a.createElement("div",{className:"nav-bar-img-div"},r.a.createElement("img",{className:"nav-bar-img",src:a.avatarURL,alt:a.nickName}))),!l.startsWith("/search")&&r.a.createElement("span",null,a.nickName)),l.startsWith("/search")&&r.a.createElement(dt,null),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"navbar-toggler",id:"dropdownMenuLink",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.length&&r.a.createElement("small",{className:"badge badge-danger"},"AVISO"),r.a.createElement("img",{className:"navbar-icon",src:(e="eggs",B[e]),alt:"eggs"})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenuLink"},r.a.createElement("button",{className:"dropdown-item",onClick:this.handleLogout},"Logout"),r.a.createElement(g.b,{className:"dropdown-item",to:"/notifications"},"Mis notificaciones",r.a.createElement("small",{className:"badge badge-danger"},"AVISO")),r.a.createElement(g.b,{className:"dropdown-item",to:"#"},"Something else here")))))}}]),t}(n.Component),gt=Object(d.f)(ht),pt=function(e){var t=e.icon,a=e.link,n=e.color,l=e.onClick;return r.a.createElement(g.b,{to:a,className:n},r.a.createElement("div",{className:"col align-items-center"},r.a.createElement("p",{className:"m-0 p-0",onClick:function(e){l&&l(e.target.value)}},r.a.createElement("i",{className:t}))))},ft=Object(d.f)(function(e){var t=e.history.location.pathname;return"/login"===t||"/register"===t?null:r.a.createElement("div",{className:"container m-0 p-0"},r.a.createElement("div",{className:"footer-bar row m-0 p-0 justify-content-center align-items-center"},r.a.createElement(pt,{name:"Volver",icon:"fas fa-arrow-left",onClick:function(t){console.log("clikado boton de volver"),e.history.goBack()},link:"#",color:"text-white"}),r.a.createElement(pt,{name:"Buscar",icon:"fas fa-search",link:"/search",color:"text-white"}),r.a.createElement(pt,{name:"Home",icon:"fas fa-home",link:"/board",color:"text-white"}),r.a.createElement(pt,{name:"CrearReto",icon:"fas fa-plus",link:"/challenges/create",color:"text-white"})))}),vt=function(e){return r.a.createElement("div",{className:"row px-2 mt-4"},r.a.createElement("div",{className:"col-4"},"        ",r.a.createElement("label",{className:"mb-1 p-0"},"Filtrar por: "),r.a.createElement(be.a,{className:"m-0 p-0"},r.a.createElement(Ee.a,{className:"m-0 p-1",size:"small",value:te[e.type],onChange:function(t){e.onChangeType(t.option)},options:Object.values(te)}))),r.a.createElement("div",{className:"col-4"},r.a.createElement("label",{className:"mb-1 p-0"},"Ordenar por: "),r.a.createElement(be.a,{className:"m-0 p-0"},r.a.createElement(Ee.a,{className:"m-0 p-1",size:"small",value:ne[e.sort],onChange:function(t){e.onChangeSort(t.option)},options:Object.values(ne)}))))},bt=a(113),Et=a(41),yt=a.n(Et),Ct=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={info:a.props,redirectToDetail:!1},a.formattedFields=function(){var e=Object(h.a)({},a.state.info);return e.description=e.description.length>X?"".concat(e.description.slice(0,X)," [...]"):e.description,e.title=e.title.length>ee?"".concat(e.title.slice(0,ee)," [...]"):e.title,e},a.goToDetail=function(){var e=a.state.info,t=e.id,n=e.type;("challenge"===n?De.addViewToChallenge(t):De.addViewToUserChallenge(t)).then(function(){"userChallenge"===n?a.props.onShowModal(t):a.setState({redirectToDetail:!0})})},a.toggleIcon=function(e){var t=a.state.info,n=t.type,r=t.id,l=a.state.itemsLiked;if(a.objectIdInArray(r,l))switch(yt()(e.target).removeClass("icon-selected"),n){case"challenge":!function(e){De.removeChallengeFromLikes(e).then(function(e){var t=e.likes,n=e.itemsLiked;a.setState(Object(h.a)({},a.state,{itemsLiked:n,info:Object(h.a)({},a.state.info,{likes:t})}))})}(r);break;case"userChallenge":!function(e){De.removeUserChallengeFromLikes(e).then(function(e){var t=e.likes,n=e.itemsLiked;a.setState(Object(h.a)({},a.state,{itemsLiked:n,info:Object(h.a)({},a.state.info,{likes:t})}))})}(r)}else switch(yt()(e.target).addClass("icon-selected"),n){case"challenge":!function(e){De.addChallengeToLikes(e).then(function(e){var t=e.likes,n=e.itemsLiked;a.setState(Object(h.a)({},a.state,{itemsLiked:n,info:Object(h.a)({},a.state.info,{likes:t})}))})}(r);break;case"userChallenge":!function(e){De.addUserChallengeToLikes(e).then(function(e){var t=e.likes,n=e.itemsLiked;a.setState(Object(h.a)({},a.state,{itemsLiked:n,info:Object(h.a)({},a.state.info,{likes:t})}))})}(r)}},a.objectIdInArray=function(e,t){var a=t.map(function(e){return JSON.stringify(e)}),n=JSON.stringify(e);return a.includes(n)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;J.getSession().then(function(t){var a;a="challenge"===e.state.info.type?Object(bt.a)(t.challengesLiked):Object(bt.a)(t.userChallengesLiked),e.setState(Object(h.a)({},e.state,{itemsLiked:a}))})}},{key:"render",value:function(){var e=this.formattedFields(),t=e.type,a=e.id,l=e.title,s=e.description,i=e.userName,o=e.avatarURL,c=e.views,m=e.likes,u=e.file,h=e.createdAt,p=e.userId,f=this.state,v=f.itemsLiked;return f.redirectToDetail&&"challenge"===t?r.a.createElement(d.a,{to:"/challenges/".concat(a,"/")}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"media align-items-center mx-0 my-2 border rounded-lg row card-search"},r.a.createElement("div",{className:"col-3 p-0",onClick:this.goToDetail},r.a.createElement("img",{src:u,className:"w-100 img-in-search rounded-lg",alt:"..."})),r.a.createElement("div",{className:"media-body col-9 p-0"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"px-2 col-9 card-media-item"},r.a.createElement("h6",{className:"m-0 my-1","data-container":"body","data-toggle":"popover","data-placement":"top","data-content":this.state.info.title},r.a.createElement("u",null,l)),r.a.createElement("p",{className:"m-0","data-container":"body","data-toggle":"popover","data-placement":"bottom","data-content":this.state.info.description},s),r.a.createElement("div",{className:"m-0 my-1 d-flex justify-content-between align-items-center"},r.a.createElement(g.b,{to:"/profile/".concat(p),className:"m-0 p-0"},r.a.createElement("img",{className:"rounded-circle avatar-user",src:o,alt:a}),r.a.createElement("span",{className:"mx-1"},r.a.createElement("small",null,r.a.createElement("strong",null,i)))),r.a.createElement("div",null,r.a.createElement("small",{className:"p-0 m-0"},r.a.createElement(me.a,{format:"DD/MM/YYYY"},h))))),r.a.createElement("div",{className:"px-1 col-3 text-center card-media-item"},r.a.createElement("div",{className:"align-content-between"},r.a.createElement("p",{className:"m-0 my-1 row align-items-center icon-unselected"},r.a.createElement("i",{className:"fas fa-eye col p-0"}),r.a.createElement("span",{className:"mx-1 p-0 col text-left font-weight-bold"},c)),r.a.createElement("p",{className:"m-0 my-1 row align-items-center ".concat(v&&this.objectIdInArray(a,v)?"icon-selected":"icon-unselected"),onClick:this.toggleIcon},r.a.createElement("i",{className:"fas fa-thumbs-up col p-0"}),r.a.createElement("span",{className:"mx-1 p-0 col text-left font-weight-bold"},m))),r.a.createElement("p",{className:"m-0 my-1 icon-unselected"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})))))))}}]),t}(n.Component),Nt=Object(d.f)(ve(Ct)),Ot=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={challenges:[],userChallenges:[a.props.userChallenges]},a.listChallenges=function(e){return e.filter(function(e){return e.title.toLowerCase().includes(a.props.search.toLowerCase())}).map(function(e){var t={type:"challenge",id:e.id,title:e.title,description:e.description,userId:e.owner.id,userName:e.owner.nickName,avatarURL:e.owner.avatarURL,views:e.views,likes:e.likes,file:e.photo,createdAt:e.createdAt};return r.a.createElement(Nt,Object.assign({key:t.id},t,{onReprint:a.handleReprint}))})},a.listUserChallenges=function(e){return e.filter(function(e){return e.challengeId.title.toLowerCase().includes(a.props.search.toLowerCase())}).map(function(e){var t={type:"userChallenge",id:e.id,title:e.challengeId.title,description:e.challengeId.description,userId:e.userId.id,userName:e.userId.nickName,avatarURL:e.userId.avatarURL,views:e.views,likes:e.likes,file:e.evidences[0].file,createdAt:e.evidences[0].createdAt};return r.a.createElement(Nt,Object.assign({key:t.id},t,{onReprint:a.handleReprint,onShowModal:a.props.onShowModal}))})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({challenges:this.props.challenges,userChallenges:this.props.userChallenges})}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.sort,l=this.props,s=l.challenges,i=l.userChallenges;return r.a.createElement(n.Fragment,null,"challenge"===t?this.listChallenges(ye(s,0,a)):this.listUserChallenges(ye(i,0,a)))}}]),t}(n.Component),wt=Object(d.f)(ut(Ot)),jt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={challenges:[],userChallenges:[],type:a.props.location.type||"challenge",sort:a.props.location.sort||"likes",showModal:!1,itemToShow:{}},a.challengesSubscription=void 0,a.userChallengesSubscription=void 0,a.handleChangeType=function(e){a.setState(Object(h.a)({},a.state,{type:ae[e]}))},a.handleChangeSort=function(e){a.setState(Object(h.a)({},a.state,{sort:re[e]}))},a.onShowModal=function(e){var t=a.state.userChallenges.filter(function(t){return t.id===e});a.setState(Object(h.a)({},a.state,{showModal:!a.state.showModal,itemToShow:t[0]})),console.log("el item es:",a.state.itemToShow)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.challengesSubscription=De.onChallengesChange().subscribe(function(t){e.setState({challenges:t})}),this.userChallengesSubscription=De.onUserChallengesChange().subscribe(function(t){e.setState({userChallenges:t})})}},{key:"componentWillUnmount",value:function(){this.challengesSubscription.unsubscribe(),this.userChallengesSubscription.unsubscribe()}},{key:"render",value:function(){var e=this.state,t=e.type,a=e.sort,n=e.itemToShow,l=e.modalOrder;return r.a.createElement("div",{className:"container"},this.state.showModal&&r.a.createElement(Ce,null,r.a.createElement(Oe,{title:n.challengeId.title,propAvatar:n.userId.avatarURL,propNickname:n.userId.nickName,evidences:n.evidences,modalOrder:l,onShowModal:this.onShowModal})),r.a.createElement(vt,{onChangeType:this.handleChangeType,onChangeSort:this.handleChangeSort,type:t,sort:a}),r.a.createElement(wt,Object.assign({},this.state,{onShowModal:this.onShowModal})))}}]),t}(n.Component),St=a(168),kt=(ve(function(e){var t=e.component,a=e.isAuthenticated,n=Object(St.a)(e,["component","isAuthenticated"]);return a()?r.a.createElement(d.b,Object.assign({},n,{component:t})):r.a.createElement(d.a,{to:"/forbidden"})}),function(){return r.a.createElement(Te.a,{options:[{label:"vero",value:1,sorpresa:"#"},{label:"sergiosdsdadasdadasfdfaddddddddddddddddddddddddddddddddddddddd",value:2,sorpresa:"%%%"},{label:"jesus",value:3,sorpresa:"t"},{label:"rodri",value:4,sorpresa:"y"}],isMulti:!0,isSearchable:!0})}),xt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container-fluid p-0"},r.a.createElement(gt,null),r.a.createElement(ft,null)),r.a.createElement("div",{className:"container-fluid px-0 py-1 margin-main-container"},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/register",component:_}),r.a.createElement(d.b,{exact:!0,path:"/login",component:G}),r.a.createElement(d.b,{exact:!0,path:"/board",component:it}),r.a.createElement(d.b,{exact:!0,path:"/profile",component:we}),r.a.createElement(d.b,{exact:!0,path:"/profile/:userId",component:we}),r.a.createElement(d.b,{exact:!0,path:"/search",component:jt}),r.a.createElement(d.b,{exact:!0,path:"/challenges/create",component:Ke}),r.a.createElement(d.b,{exact:!0,path:"/challenges/:challengeId",component:Je}),r.a.createElement(d.b,{exact:!0,path:"/user-challenges/:userChallengeId",component:at}),r.a.createElement(d.b,{exact:!0,path:"/notifications",component:Notification}),r.a.createElement(d.b,{exact:!0,path:"/ejemplo",component:kt}),r.a.createElement(d.a,{to:"/board"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Mt=a(342),Ut={global:{font:{family:"Roboto",size:"14px",height:"20px"},colors:{brand:"#b1e3fa",neutral:"#ebf9ff"}},button:{border:{radius:"10px"}}};yt()(function(){yt()('[data-toggle="popover"]').popover()}),s.a.render(r.a.createElement(g.a,{basename:"https://vero-rodri.github.io/web-no-hay-webos"},r.a.createElement(fe,null,r.a.createElement(mt,null,r.a.createElement(Mt.a,{theme:Ut},r.a.createElement(xt,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},34:function(e){e.exports={user_required:"Nombre de usuario requerido",email_required:"Email requerido",password_required:"Contrase\xf1a requerida",email_unique:"Email y/o contrase\xf1a incorrectos",nickName_unique:"Este nombre no est\xe1 disponible. Elige otro...",non_existent_email:"Email y/o contrase\xf1a incorrectos",invalid_password:"Email y/o contrase\xf1a incorrectos",maxLength_excedeed:"T\xedtulo m\xe1ximo de 50 caracteres",photo_required:"La imagen del reto es obligatoria",title_required:"T\xedtulo de la evidencia obligatorio",date_required:"La fecha del reto es obligatoria",periodicity_required:"La periodicidad es obligatoria",duration_required:"La duraci\xf3n es obligatoria",file_required:"Tienes que enviar una prueba f\xedsica de tu logro!"}},35:function(e){e.exports={hen:"https://res.cloudinary.com/ddby3wqlo/image/upload/v1554413882/NoHayWebos/icons/hen.png",viking:"https://res.cloudinary.com/ddby3wqlo/image/upload/v1554413882/NoHayWebos/icons/viking.png",eggs:"https://res.cloudinary.com/ddby3wqlo/image/upload/v1554483106/NoHayWebos/icons/two-eggs-white.png",logo:"https://res.cloudinary.com/ddby3wqlo/image/upload/v1554674212/NoHayWebos/icons/LOGO_WEBOS-01-01.png"}}},[[175,1,2]]]);
//# sourceMappingURL=main.32d9556a.chunk.js.map