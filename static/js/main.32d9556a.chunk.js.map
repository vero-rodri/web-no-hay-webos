{"version":3,"sources":["components/misc/forms/InputField.js","utils/formValidators.js","components/misc/forms/FileInput.js","utils/createForm.js","services/authService.js","components/auth/Register.js","components/auth/Login.js","services/usersService.js","constants.js","ui/CardItem.js","ui/CardsScroll.js","ui/CardsRow.js","context/AuthStore.js","utils/handleLogicSelects.js","components/misc/Modal.js","ui/Carousel.js","ui/EvidencesModal.js","components/auth/Profile.js","services/challengesService.js","ui/SelectUsers.js","services/userChallengesService.js","components/challenges/ChallengeDetail.js","components/misc/forms/TextAreaInput.js","components/misc/forms/SelectInput.js","components/challenges/ChallengeCreate.js","services/evidencesService.js","ui/ProgressBar.js","components/userChallenges/UserChallenge.js","components/board/ChallengesScroll.js","ui/TextCustom.js","components/board/LabelAndButton.js","components/board/Board.js","context/SearchStore.js","ui/InputSearch.js","components/misc/NavBar.js","ui/IconCustom.js","components/misc/FooterBar.js","components/search/SearchFilters.js","components/search/SearchItem.js","components/search/SearchItemsList.js","components/search/Search.js","components/misc/selectPrueba.js","guards/PrivateRoute.js","App.js","serviceWorker.js","utils/theme-grommet.js","index.js"],"names":["InputField","handleChange","event","name","_this","props","target","value","_this$props","this","label","placeholder","errors","onblur","type","onChange","hasErrors","length","react_default","a","createElement","Box","margin","top","Text","bottom","TextInput","Object","assign","className","align","onBlur","map","error","index","key","size","color","left","Component","PASSWORD_PATTERN","EMAIL_PATTERN","checkEmail","_","cb","email","test","Error","checkPassword","password","checkLength","checkDate","Date","checkDuration","checkPeriodicity","checkSize","callback","files","undefined","getFileValueProps","getValueFromFileEvent","_ref","FileInput","form","getFieldProps","getFieldError","initialValue","getValueProps","getValueFromEvent","rules","customCreateForm","createDOMForm","validateMessages","required","field","user","JSON","parse","localStorage","getItem","user$","BehaviorSubject","http","axios","create","baseURL","process","withCredentials","authService","register","imgKey","data","FormData","keys","forEach","append","post","headers","content-type","then","response","authenticate","console","log","setItem","stringify","next","logout","get","removeItem","onUserChange","asObservable","getUserDetail","userId","concat","getSession","Register","state","isRegistered","handleSubmit","preventDefault","validateFields","fields","setState","errorResponse","objectSpread","react_router","to","text","src","icons","alt","Form","onSubmit","forms_InputField","validateFirst","validateTrigger","validator","forms_FileInput","alignSelf","message","Button","style","height","primary","fill","react_router_dom","textDecoration","fontWeight","createForm","Login","isAuthenticated","usersService","getUserChallengesByUser","getChallengesByUser","getUsers","LIMIT_DESCRIPTION","LIMIT_TITLE","SELECT_TYPES","challenge","userChallenge","MIRROR_SELECT_TYPES","Reto","UC","SELECT_SORTS","views","likes","createDate","MIRROR_SELECT_SORTS","+ Vistos","+ Likes","+ Recientes","LIMIT_AVATARS_LIST","DEFAULT_ICON_OPACITY","REGEX_IMAGE","REGEX_VIDEO","CardItem","isRedirectedToItem","userSubscription","onRedirectToItem","onDeleteEvidence","item","id","onShowModal","origin","order","createInfoCard","element","title","date","createdAt","owner","nickName","photo","challengeId","evidences","ownerId","file","comments","userAux","subscribe","unsubscribe","_this$state","isRedirectedToUser","infoCard","push","Stack","anchor","onClick","match","width","data-container","data-toggle","data-placement","data-content","slice","formattedText","dist_default","format","CardsScroll","items","textAlternative","ui_CardItem","onOrderModal","CardsRow","ui_CardsScroll","CURRENT_USER_KEY","AuthContext","React","createContext","AuthStore","userChangeSubscription","handleUserChange","_this2","Provider","onUserChanged","children","withAuthConsumer","Consumer","storeProps","listByFilters","sort","filteredArr","b","arr","sortByViews","sortByCreateAt","Modal","createPortal","document","querySelector","Carousel","isActive","data-ride","evidence","controls","isImageOrVideo","href","role","data-slide","aria-hidden","EvidencesModal","propAvatar","propNickname","modalOrder","Fragment","ui_Carousel","params","userChallengesInProcess","userChallengesFinished","challenges","optionUserChallengeInProcessFiltered","optionUserChallengeFinishedFiltered","optionChallengeFiltered","showModal","itemToShow","itemId","itemFinished","filter","itemInProcess","p1","p2","Promise","all","_ref2","slicedToArray","userChallenges","isFinished","_this3","misc_Modal","ui_EvidencesModal","avatarURL","FormField","Select","options","values","option","ui_CardsRow","userChallengeDetail","challenges$","userChallengeDetail$","userChallenges$","getChallenges","getUserChallenges","challengesService","getChallengeDetail","createChallenge","getUserChallengeDetail","UserChallengeId","onChallengesChange","onUserChallengesChange","onUsersChallengeDetailChange","createUserChallenge","updateUserChallenge","addChallengeToLikes","removeChallengeFromLikes","delete","addUserChallengeToLikes","userChallengeId","removeUserChallengeFromLikes","addViewToChallenge","addViewToUserChallenge","createEvidence","addParticipantToChallenge","getUserChallengesFinishedByChallenge","SelectUsers","isOpen","handleMenuToggle","handleChangeUsers","react_select_esm","menuIsOpen","isMulti","isSearchable","onMenuClose","onMenuOpen","userChallengesPending","userChallengesPending$","userChallengesService","createUserChallengesByNotifications","body","getUserChallengesPending","onUserChallengesPendingChange","ChallengeDetail","isAlreadyJoined","isJoinedNow","optionFiltered","showModalEvidences","showModalSendChallenge","listUsers","usersSelected","comment","objectIdInArray","userIdAux","object","includes","onClickJoin","onClickChallengeOthers","onHideModalSendChallenge","countUserChallenges","countUserChallengesFinished","Finished","createListAvatarsUserChallenges","onShowModalEvidences","listUsersOptions","handleChangeUsersSelectedModal","handleCommentModal","handleSubmitModal","usersId","userChallengesServices","catch","err","_this$state$challenge","description","ListUsersFiltered","ui_SelectUsers","TextArea","SendChallengeToUsers","disabled","TextAreaInput","SelectInput","correlationNames","challengeOptions","challengeSelect","getChallengeDescriptionText","challengeDescription","ChallengeCreate","isCompleted","updatedFields","setFieldsValue","forms_TextAreaInput","forms_SelectInput","getFieldValue","react","evidencesService","getEvidencesList","evidenceDelete","evidenceId","ProgressBar","backgroundImage","gradient","getIconText","UserChallenge","totalEvidences","challengeOwner","isVisibleForm","rangeValue","opacityHen","opacity","opacityViking","onClickEvidenceForm","getProgressStatus","newRangeValue","prevFinished","newEvidences","reverse","periodicity","duration","currentEvidences","ui_ProgressBar","ChallengesScroll","Image","pathname","toUpperCase","TextCustom","LabelAndButton","link","ui_TextCustom","Board","componentDidMount","p3","topChallenges","topUserChallenges","latestUserChallenges","board_LabelAndButton","labelButton","board_ChallengesScroll","SearchContext","SearchStore","search","handleSearchChange","keyword","onSearchChange","withSearchConsumer","direction","round","border","plain","icon","FormSearch","NavBar","usersChallengesPendingSubscription","handleLogout","history","userChallengesPendingSubscription","location","startsWith","ui_InputSearch","aria-haspopup","aria-expanded","aria-labelledby","withRouter","IconCustom","ui_IconCustom","goBack","SearchFilters","onChangeType","onChangeSort","SearchItem","info","redirectToDetail","formattedFields","formatedProps","goToDetail","_this$state$info","challengeService","toggleIcon","_this$state$info2","itemsLiked","$","removeClass","handleRemoveLikeFromChallenge","handleRemoveLikeFromUserChallenge","addClass","handleAddLikeToChallenge","handleAddLikeToUserChallenge","objId","arrAux","objIdAux","toConsumableArray","challengesLiked","userChallengesLiked","formattedProps","userName","SearchItemsList","listChallenges","toLowerCase","search_SearchItem","onReprint","handleReprint","listUserChallenges","_this$props2","Search","challengesSubscription","userChallengesSubscription","handleChangeType","handleChangeSort","search_SearchFilters","search_SearchItemsList","Ejemplo","component","rest","objectWithoutProperties","sorpresa","App","misc_NavBar","misc_FooterBar","exact","path","Profile","Notification","Boolean","window","hostname","customTheme","global","font","family","colors","brand","neutral","button","radius","popover","ReactDOM","render","basename","AuthStore_AuthStore","SearchStore_SearchStore","Grommet","theme","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.32d9556a.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { TextInput, Box, Text  } from 'grommet';\n\nclass InputField extends Component {\n\n  handleChange = (event) => {\n    const name = this.props.name;\n    this.props.handleChange(name, event.target.value)\n  }\n\n  render() {\n    const {\n      label,     \n      value,\n      //icon,    \n      placeholder,\n      errors,\n      onblur,\n      type,\n      onChange,\n    } = this.props;\n\n    const hasErrors = errors && errors.length > 0;\n\n    return (\n      <Box margin={{top: \"medium\"}} >\n        <Text margin={{bottom: \"xsmall\"}}>{label}</Text>\n        <TextInput className=\"bg-white\"\n          align=\"center\"\n          margin=\"\"\n          onChange={onChange}\n          value={value}\n          {...(type ? { type } : null)}\n          {...(placeholder ? { placeholder } : null)}\n          {...(onblur ? { onBlur: onblur } : null)}\n        />\n        {hasErrors &&\n          errors.map((error, index) => (\n            <Text\n              key={index} \n              size=\"small\" \n              color=\"status-error\" \n              margin={{top: \"xsmall\", left:\"small\"}}>\n              {error}\n            </Text>\n          ))}\n\n      </Box>\n    );\n  }\n}\n\nexport default InputField;","const PASSWORD_PATTERN = /(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/;\nconst EMAIL_PATTERN = /^(([^<>()[\\].,;:\\s@“]+(\\.[^<>()[\\].,;:\\s@“]+)*)|(“.+“))@(([^<>()[\\].,;:\\s@“]+\\.)+[^<>()[\\].,;:\\s@“]{2,})$/i;\n\n\nexport const isEmail = email => email && EMAIL_PATTERN.test(email);\n\nexport const isPassword = password => password && PASSWORD_PATTERN.test(password);\n\nexport const checkEmail = (_, value, cb) =>\n  isEmail(value) ? cb() : cb(new Error('formato de email no válido'));\n\nexport const checkPassword = (_, value, cb) =>\n  isPassword(value) ? cb() : cb(new Error('formato de contraseña no válido'));\n\nexport const checkLength = (_, value, cb) =>\n  value && value.length < 49 ? cb() : cb(new Error('máximo 50 caracteres'));\n\nexport const checkDate = (_, value, cb) => \n  value && new Date(value) > new Date() ? cb() : cb(new Error('elige una fecha futura!'));\n\nexport const checkDuration = (_, value, cb) => \n  value && value > 0 && value < 365 ? cb() : cb(new Error('la duración tiene que estar entre 1 y 365 días'));\n\nexport const checkPeriodicity = (_, value, cb) => \n  value && value > 0 && value < 30 ? cb() : cb(new Error('la periodicidad tiene que estar entre 1 y 30 días'));\n\n\nexport const checkSize = (_, value, callback) => {\n  if (value && value.target) {\n    const files = value.target.files;\n    if (files[0]) {\n      callback(files[0].size > 10000000 ? 'máximo tamaño: 10MB' : undefined);\n    } else {\n      callback();\n    }\n  } else {\n    callback();\n  }\n}\n","import React, { Component } from 'react';\nimport { Box, Text, TextInput } from 'grommet';\nimport { checkSize } from '../../../utils/formValidators';\n\nfunction getFileValueProps(value) {\n  if (value && value.target) {\n    return {\n      value: value.target.value,\n    };\n  }\n  return {\n    value,\n  };\n}\n\nfunction getValueFromFileEvent({ target }) {\n  return {\n    target,\n  };\n}\n\nclass FileInput extends Component {\n  render() {\n    const { form, label, name } = this.props;\n    const { getFieldProps, getFieldError } = form;\n    return (\n      <Box margin={{top: \"medium\"}}>\n        <Text margin={{bottom: \"xsmall\"}}>{label}</Text>\n        <TextInput \n          type=\"file\" {...getFieldProps(name, {\n                initialValue: '',\n                getValueProps: getFileValueProps,\n                getValueFromEvent: getValueFromFileEvent,\n                rules: [checkSize],\n              })}\n        />\n          {getFieldError(name) && getFieldError(name).map((error, index) => {\n            return (\n            <Text\n              key={index} \n              size=\"small\" \n              color=\"status-error\" \n              margin={{top: \"xsmall\", left:\"small\"}}>\n              {error}\n            </Text>\n            )}\n          )}\n\n      </Box>\n    );\n  }\n}\n\nexport default FileInput;\n\n","import createDOMForm from 'rc-form/lib/createDOMForm';\n\nconst customCreateForm = () =>\n  createDOMForm({\n    validateMessages: {\n      required(field) {\n        return 'Campo requerido';\n      }\n    }\n  });\n\nexport { customCreateForm as createForm };","import axios from 'axios';\nimport { BehaviorSubject } from 'rxjs';\n\n\nconst CURRENT_USER_KEY = 'current-user';\nlet user = JSON.parse(localStorage.getItem(CURRENT_USER_KEY) || '{}')\nconst user$ = new BehaviorSubject(user);\n\nconst http = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:3001',\n  withCredentials: true\n})\n\n\nconst register = (user, imgKey) => {\n  const config = {\n    headers: {\n      'content-type': 'multipart/form-data'\n    }\n  };\n  const data = new FormData();\n\n  Object.keys(user).forEach(key => {\n    if ( key === imgKey && user[key]) {\n      data.append(key, user[key].target.files[0])\n    } else {\n      data.append(key, user[key])\n    }\n  })\n  return http.post('/register', data, config).then(response => response.data);\n}\n\n\nconst authenticate = (user) => {\n  \n  return http.post('/authenticate', user)\n    .then(response => {\n      console.log(\"el usuario logado es \", response.data)\n        user = response.data;\n        localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));\n        user$.next(user);\n        return user;\n      }\n    )\n}\n\n\nconst logout = () => \n  http.get('/logout')\n    .then(response => {\n      user = {};\n      localStorage.removeItem(CURRENT_USER_KEY);\n      return response.data\n    });\n\n\nconst getUserDetail = (userId) => {\n  return http.get(`/user/${userId}`)\n    .then(response => response.data)\n}\n\n\nconst getSession = () => {\n  return http.get('/session')\n    .then(response => response.data)\n}\n\n\nconst onUserChange = () => user$.asObservable()\n\n\nexport default {\n  register,\n  authenticate,\n  logout,\n  onUserChange,\n  getUserDetail,\n  getSession \n}\n","import React, { Component } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport { Form, Button, Box, Text } from 'grommet';\nimport InputField from '../misc/forms/InputField';\nimport FileInput from '../misc/forms/FileInput';\nimport { createForm } from '../../utils/createForm'\nimport {\n  checkEmail,\n  checkPassword\n} from '../../utils/formValidators';\nimport authService  from '../../services/authService';\nimport errors from '../../utils/errors.json';\nimport icons from '../../utils/icons.json';\n\nconst getErrorText = text => errors[text];\nconst getIconText = text => icons[text];\n\n\nclass Register extends Component {\n  state = {\n    errors: {},\n    isRegistered: false\n  }\n  \n  handleSubmit = (event) => {\n    const { form } = this.props;\n    event.preventDefault();\n    \n    form.validateFields((errors, fields) => {\n      const hasErrors = errors && Object.keys(errors).length > 0;\n      if (!hasErrors) {\n        authService.register(fields, 'fileProfile')\n        .then(\n          () => this.setState({ isRegistered: true }), \n          error => {\n            const { error: errorResponse } = error.response.data;\n            this.setState({\n              errors: {\n                ...this.state.errors,\n                ...errorResponse.errors,\n              }\n          })\n        }) \n      }\n    });\n  };\n  \n  render() {\n    if ( this.state.isRegistered ) {\n      return <Redirect to=\"/login\" />\n    }\n\n    const { form } = this.props;\n    const { getFieldProps, getFieldError } = form;\n    const { errors } = this.state;\n    \n    return (\n    <div className=\"main-bg\">\n      <div ><img className=\"logo register\" src={getIconText(\"logo\")} alt=\"logo\" ></img></div>\n      <div className=\"intro-form-container\">\n        <Form onSubmit={this.handleSubmit}>\n\n          <InputField\n            label=\"Nombre:\"\n            placeholder=\"Daenerys\"\n            type=\"search\"\n            {...getFieldProps('nickName', {\n              initialValue: '',\n              validateFirst: true,\n              validateTrigger: 'onblur',\n              rules: [{ required: true}]\n            })}\n            errors={getFieldError('nickName')}\n          />\n\n          <InputField\n            label=\"Email:\"\n            placeholder=\"reinadedragones@example.com\"\n            type=\"search\"\n            {...getFieldProps( 'email', {\n              initialValue: '',\n              validateFirst: true,\n              validateTrigger: 'onblur',\n              rules: [{ required: true, validator: checkEmail }]\n            })}\n            errors={getFieldError('email')}\n          />\n\n          <InputField\n            label=\"Contraseña:\"\n            placeholder=\"123Abc\"\n            type=\"password\"\n            {...getFieldProps('password', {\n              initialValue: '',\n              validateFirst: true,\n              validateTrigger: 'onblur',\n              rules: [{ required: true, validator: checkPassword }]\n            })}\n            errors={getFieldError('password')}\n          />\n\n          <FileInput\n            label=\"Imagen de perfil:\"\n            form={form}\n            name=\"fileProfile\"\n          />\n\n          {errors && Object.keys(errors).length > 0 && (\n            Object.keys(errors).map((key, index) => (\n            <Box key={index}>\n              <Text \n                alignSelf=\"center\"\n                size=\"small\" \n                color=\"status-error\" \n                margin={{top: \"medium\", left:\"small\"}}>\n                {getErrorText(errors[key].message)}\n              </Text>\n            </Box>\n            )) \n          )}\n\n          <Button style={{height: \"45px\"}} className=\"login-btn\"\n          type=\"submit\" primary label=\"Registrarme\" margin={{top: \"medium\", bottom: \"small\"}} fill />\n        \n        </Form>\n\n        <Text size=\"small\" alignSelf=\"center\">\n          ¿Ya estás registrado? \n          <Link to=\"/login\" style={{ \"textDecoration\": \"none\", \"fontWeight\": \"bold\", \"color\": \"#404040\" }}>  Entra</Link>\n        </Text>\n      </div>\n    </div>\n    )\n  }\n}\n\nexport default createForm()(Register);\n\n\n","import React, { Component } from 'react';\nimport { Redirect, Link } from 'react-router-dom'\nimport { Form, Button, Box, Text } from 'grommet';\nimport InputField from '../misc/forms/InputField';\nimport { createForm } from '../../utils/createForm'\nimport authService  from '../../services/authService';\nimport errors from '../../utils/errors.json';\nimport icons from '../../utils/icons.json';\n\n\nconst getErrorText = text => errors[text];\nconst getIconText = text => icons[text];\n\n\nclass Login extends Component {\n  state = {\n    errors: {},\n    isAuthenticated: false\n  }\n\n  handleSubmit = event => {\n    const { form } = this.props;\n    event.preventDefault();\n\n    form.validateFields((errors, fields) => {\n      const hasErrors = errors && Object.keys(errors).length > 0;\n      if (!hasErrors) {\n        authService.authenticate(fields)\n        .then(\n          () => this.setState({ isAuthenticated: true }), \n          error => {\n            const { error: errorResponse } = error.response.data;\n            this.setState({\n              errors: {\n                ...this.state.errors,\n                ...errorResponse\n              }\n            })\n        }) \n      }\n    });\n  };\n\n\n  render() {\n\n    if ( this.state.isAuthenticated ) {\n      return <Redirect to=\"/board\" />\n    }\n\n    const { form } = this.props;\n    const { getFieldProps, getFieldError } = form;\n    const { errors } = this.state;\n\n    return (\n      <div className=\"main-bg\">\n        <div ><img className=\"logo login\" src={getIconText(\"logo\")} alt=\"logo\"></img></div>\n        <div className=\"intro-form-container\">\n          <Form onSubmit={this.handleSubmit}>\n\n            <InputField\n              label=\"Email:\"\n              placeholder=\"reinadedragones@example.com\"\n              type=\"search\"\n              {...getFieldProps( 'email', {\n                initialValue: '',\n                validateFirst: true,\n                validateTrigger: 'onblur',\n                rules: [{ required: true }]\n              })}\n              errors={getFieldError('email')}\n            />\n\n            <InputField\n              label=\"Contraseña:\"\n              placeholder=\"123Abc\"\n              type=\"password\"\n              {...getFieldProps('password', {\n                initialValue: '',\n                validateFirst: true,\n                validateTrigger: 'onblur',\n                rules: [{ required: true }]\n              })}\n              errors={getFieldError('password')}\n            />\n\n            {errors && Object.keys(errors).length > 0 && (\n              Object.keys(errors).map((key, index) => (\n              <Box key={index}>\n                <Text\n                  alignSelf=\"center\"\n                  size=\"small\" \n                  color=\"status-error\" \n                  margin={{top: \"medium\", left:\"small\"}}>\n                  {getErrorText(errors[key])}\n                </Text>\n              </Box>\n              )) \n            )}\n\n            <Button style={{height: \"45px\"}} className=\"login-btn\"\n            type=\"submit\" primary label=\"Iniciar sesión\" margin={{top: \"medium\", bottom: \"small\"}} fill />\n          </Form>\n\n          <Text size=\"small\" alignSelf=\"center\">\n            ¿Aún no tienes una cuenta? \n            <Link to=\"/register\" style={{ \"textDecoration\": \"none\", \"fontWeight\": \"bold\", \"color\": \"#404040\" }}>  Regístrate</Link>\n          </Text>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default createForm()(Login);\n","import axios from 'axios';\n\n\nconst http = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:3001',\n  withCredentials: true\n})\n\n\nconst getUserChallengesByUser = (userId) => {\n  console.log(\"en UC por user\");\n  return http.get(`users/${userId}/user-challenges`)\n    .then(response => response.data)\n}\n\n\nconst getChallengesByUser = (userId) => {\n  console.log(\"en Challenge por user\");\n  return http.get(`users/${userId}/challenges`)\n    .then(response => response.data)\n}\n\nconst getUsers = () => {\n  console.log(\"en servicio obteniendo listado users\");\n  return http.get('users')\n    .then(response => response.data)\n}\n\nexport default {\n  getUserChallengesByUser,\n  getChallengesByUser,\n  getUsers\n}","const LIMIT_DESCRIPTION = 55;\nconst LIMIT_TITLE = 15;\n\nexport const LIMIT_TEXT_CARD_ITEM = 10;\n\nconst SELECT_TYPES = {\n  'challenge': 'Reto', \n  'userChallenge': 'UC',\n};\nconst MIRROR_SELECT_TYPES = {\n  'Reto': 'challenge', \n  'UC': 'userChallenge',\n};\nconst SELECT_SORTS = {\n  'views': '+ Vistos', \n  'likes': '+ Likes',\n  \"createDate\": '+ Recientes',\n};\nconst MIRROR_SELECT_SORTS = {\n  '+ Vistos': 'views', \n  '+ Likes': 'likes',\n  \"+ Recientes\": 'createDate',\n};\nconst SELECT_CATEGORIES = [\n  {'sports': 'Deportivos'},\n  {'crazyThings': 'Locuras'}\n];\nconst LIMIT_AVATARS_LIST = 2;\n\nconst DEFAULT_ICON_OPACITY = \"0.15\";\n\nconst REGEX_IMAGE = /\\.(jpg|jpeg|png|JPG|JPEG|PNG)$/;\n\nconst REGEX_VIDEO = /\\.(avi|gif|mp4|wmv|webm|ogv|flv|mpg)$/;\n\nexport {\n  LIMIT_DESCRIPTION,\n  LIMIT_TITLE,\n  SELECT_TYPES,\n  SELECT_SORTS,\n  SELECT_CATEGORIES,\n  MIRROR_SELECT_TYPES,\n  MIRROR_SELECT_SORTS,\n  LIMIT_AVATARS_LIST,\n  DEFAULT_ICON_OPACITY,\n  REGEX_IMAGE,\n  REGEX_VIDEO\n}","import React, { Component } from 'react';\nimport authService from '../services/authService';\nimport { Redirect, Link } from 'react-router-dom';\nimport { Box, Stack} from  'grommet';\nimport { REGEX_IMAGE, REGEX_VIDEO, LIMIT_TEXT_CARD_ITEM } from '../constants';\nimport Moment from 'react-moment';\nimport 'moment-timezone';\n\n\nclass CardItem extends Component {\n\n  state = {\n    user: {},\n    isRedirectedToItem: false\n  }\n  \n  userSubscription = undefined;\n\n  componentDidMount() {\n    let userAux = {};\n    this.userSubscription = authService.onUserChange().subscribe((user) => {\n      userAux = user;\n    });\n\n    this.setState({\n      ...this.state,\n      user: userAux,\n    })\n  }\n\n  componentWillUnmount() {\n    this.userSubscription.unsubscribe();\n  }\n\n\n  onRedirectToItem = () => {\n    this.setState({\n      ...this.state,\n      isRedirectedToItem: true\n    })\n  }\n  \n\n  onDeleteEvidence = () => {\n    this.props.onDeleteEvidence(this.props.item.id)\n  }\n\n\n  onShowModal = () => {\n    ( this.props.origin === 'profile' && this.props.item.userId.id === this.state.user.id )\n     ? this.onRedirectToItem() \n     : this.props.onShowModal(this.props.order, this.props.item.id)\n  }\n\n\n  createInfoCard = (element, type) => {\n    switch (type) {\n      case \"challenge\": {\n        return {\n          text: element.title,\n          date: element.createdAt,\n          owner: element.owner.nickName,\n          likes: element.likes,\n          views: element.views,\n          photo: element.photo\n        }\n      }\n      case \"userChallenge\": {\n\n        return {\n          text: element.challengeId.title,\n          date: (element.evidences.length) ? element.evidences[0].createdAt: undefined,\n          owner: element.userId.nickName,\n          ownerId: element.userId.id,          \n          likes: element.likes,\n          views: element.views,\n          photo: (element.evidences.length) ? element.evidences[0].file: undefined\n        }\n      }\n      case \"evidence\": {\n        return {\n          text: element.comments,\n          date: element.createdAt,\n          owner: undefined,\n          ownerId: undefined,\n          likes: undefined,\n          views: undefined,\n          photo: element.file\n        }\n      }\n      default: {}\n    }\n  }\n  render() {\n    const { isRedirectedToItem, isRedirectedToUser } = this.state;\n    const { item, type, origin, onShowModal } = this.props\n    const infoCard = this.createInfoCard(item, type);\n    const { text, date, owner, ownerId, likes, views, photo } = infoCard;\n    const formattedText = (text) => ((text.length > LIMIT_TEXT_CARD_ITEM) ?  \n      (`${text.slice(0, LIMIT_TEXT_CARD_ITEM)} [...]`) : text);\n\n      \n      \n    if (isRedirectedToItem) {\n      if (type ==='challenge') {\n        return <Redirect push to={`/challenges/${item.id}`} />\n      } else if ( origin === 'profile') {\n        return <Redirect push to={`/user-challenges/${item.id}`} /> \n      }\n    }\n\n    return (\n      <Stack key={item.id} anchor='center' className=\"card-content mx-1\">\n        <Box >\n          <div className=\"card\">\n\n            {(!photo) && <span className=\"card-img-top img-card-size\" onClick={this.onRedirectToItem}><h6 className=\"h-100 m-0 d-flex align-items-center\"> CLIKEAME PARA SUBIR TU LOGRO</h6></span>}\n            {((photo) && (photo.match(REGEX_VIDEO))) && \n            <video className=\"video-card\" width=\"125\" height=\"80\" onClick={(onShowModal) ? this.onShowModal : this.onRedirectToItem}>\n              <source src={photo} type=\"video/ogg\"/>\n            </video> \n            }\n\n            {((photo) && (photo.match(REGEX_IMAGE))) && \n            <img src={photo} className=\"card-img-top img-card-size\" alt=\"\" onClick={(onShowModal) ? this.onShowModal : this.onRedirectToItem}/>\n            }\n            <div className=\"card-body m-0 p-0 text-center\">\n              {(origin !== \"challenge\") \n                &&  <span className=\"m-0\" data-container=\"body\" data-toggle=\"popover\" data-placement=\"bottom\" data-content={text}>\n                      <u>{formattedText(text)}</u>\n                    </span>}\n              <div className=\"row m-0\">\n                <div className=\"col-7 text-left m-0 pl-2 align-items-end d-flex\">\n                  {((origin !== \"profile\") && (type !== \"evidence\")) \n                    && <Link to={`/profile/${ownerId}`}><p className=\"m-0 height-line\"><small><strong>{owner}</strong></small></p></Link>}\n                  {((type === \"evidence\") || (origin === \"profile\")) \n                    && <p className=\"m-0 height-line\"><small className=\"mx-1\"><Moment className=\"\" format=\"DD/MM/YYYY\">{date}</Moment></small></p>}\n                </div>    \n                \n                  <div className=\"col-5 text-left p-0 pl-2 m-0\">\n                    {((type !== \"evidence\") && ((origin === \"board\") || (origin === \"profile\"))) \n                      && <p className=\"m-0 height-line\"><small><i className=\"mx-1 fas fa-thumbs-up fa-xs\"></i>{likes}</small></p>}\n                    {((type !== \"evidence\") && ((origin === \"board\") || (origin === \"profile\"))) \n                      && <p className=\"m-0 height-line\"><small><i className=\"mx-1 fas fa-eye fa-xs\"></i>{views}</small></p>}\n                    {(type === 'evidence')\n                      && <button className=\"p-0 mx-3\" onClick={this.onDeleteEvidence}><i className=\"fas fa-trash-alt text-danger\"></i></button>}\n                  </div>\n                  <div className=\"col-5 text-left p-0 pl-2 m-0\">\n                  </div>\n              </div>\n            </div>\n          </div>\n        </Box>\n      </Stack> \n    )\n  }\n}\n\nexport default CardItem;","import React from 'react';\nimport CardItem from './CardItem';\n\nconst CardsScroll = (props) => {\n  \n  const { items, textAlternative, type, origin, onDeleteEvidence, onShowModal } = props;\n\n  if (type === \"challenge\" ) {\n    return ( \n      <div className=\"col cards-scroll user-challenge-scroll\">\n        <div className=\"cards-scroll mx-1\">\n          {items.length ?\n            items.map((item, index) => <CardItem  key={index} \n                                                  item={item} \n                                                  origin={origin} \n                                                  order={index}\n                                                  type={type} \n                                                  />)\n            : <h6 className=\"text-center m-2 w-100\">{textAlternative}</h6>} \n        </div>\n      </div>\n    )\n  }\n\n  if ( type === \"evidence\" ) {\n    return ( \n      <div className=\"col cards-scroll user-challenge-scroll\">\n        <div className=\"cards-scroll mx-1\">\n          {items.length ?\n            items.map((item, index) => <CardItem  key={index} \n                                                  item={item} \n                                                  origin={origin} \n                                                  order={index}\n                                                  type={type} \n                                                  onDeleteEvidence={(id) => onDeleteEvidence(id)}\n                                                  onShowModal={(order, id ) => onShowModal(order, id)}\n                                                  onOrderModal={props.onOrderModal}\n                                                  />)\n            : <h6 className=\"text-center m-2 w-100\">{textAlternative}</h6>} \n        </div>\n      </div>\n    )\n  }\n\n\n  if (type === \"userChallenge\") {\n    return ( \n      <div className=\"col cards-scroll user-challenge-scroll\">\n        <div className=\"cards-scroll mx-1\">\n          {items.length ?\n            items.map((item, index) => <CardItem  key={index} \n                                                  item={item} \n                                                  origin={origin}\n                                                  order={0} \n                                                  type={type}\n                                                  onShowModal={(order, id ) => onShowModal(order, id)} \n                                                  />)\n            : <h6 className=\"text-center m-2 w-100\">{textAlternative}</h6>} \n        </div>\n      </div>\n    )\n  }\n}\n\nexport default CardsScroll;\n","import React from 'react';\nimport CardsScroll from './CardsScroll';\n\nconst CardsRow = (props) => {\n\n  return ( \n    <div className=\"row py-2 my-1 scroll-container\">\n      <CardsScroll {...props} />\n      </div>\n  )\n}\n\nexport default CardsRow;\n","import React, { Component } from 'react'\nimport authService from '../services/authService';\n\nconst CURRENT_USER_KEY = 'current-user';\n\nconst AuthContext = React.createContext();\n\nclass AuthStore extends Component {\n\n  state = {\n    user: JSON.parse(localStorage.getItem(CURRENT_USER_KEY) || '{}')\n  }\n  userChangeSubscription = {}\n\n  componentDidMount() {\n    this.userChangeSubscription = authService.onUserChange()\n      .subscribe(user => this.setState({ user: user }));\n  }\n\n  componentWillUnmount() {\n    this.userChangeSubscription.unsubscribe();\n  }\n\n  handleUserChange = (user) => {\n    this.setState({ user: user });\n   /*  if (user && user.email) {\n      localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));\n    } else {\n      localStorage.removeItem(CURRENT_USER_KEY)\n    } */\n  }\n\n  isAuthenticated = () => this.state.user && this.state.user.email;\n  //isAdmin = () => this.state.user && this.state.user.role === 'admin';\n\n  render() {\n    return (\n      <AuthContext.Provider value={{\n        user: this.state.user,\n        onUserChanged: this.handleUserChange,\n        isAuthenticated: this.isAuthenticated\n      //  isAdmin: this.isAdmin,\n      }}>\n        {this.props.children}\n      </AuthContext.Provider>\n    );\n  }\n}\n\nconst withAuthConsumer = (Component) => {\n  return (props) => (\n    <AuthContext.Consumer>\n      {(storeProps) => <Component {...props} {...storeProps}/>}\n    </AuthContext.Consumer>\n  )\n}\n\nexport { AuthContext, AuthStore, withAuthConsumer }","import { MIRROR_SELECT_SORTS } from '../constants';\n\nconst showUsersChallenge = (items) => {\n\n  const topLikesUserChallenges = () => this.state.userChallenges\n    .sort((a, b) => b.likes - a.likes)\n    .slice(0, 10);\n\n\n  const topViewsUserChallenges = () => this.state.userChallenges\n    .sort((a, b) => b.views - a.views)\n    .slice(0, 10);\n\n\n  const latestUserChallenges = () => this.state.userChallenges\n    .sort((a, b) => {\n      return (Date.parse(b.evidences[b.evidences.length - 1].createdAt) - Date.parse(a.evidences[a.evidences.length - 1].createdAt) > 0) ? 1 : -1 \n    })\n    .slice(0, 10);\n\n  const { optionFiltered } = this.state;\n  let userChallengesFiltered = [];\n  switch (MIRROR_SELECT_SORTS[optionFiltered]) {\n    case \"likes\": {\n      userChallengesFiltered = topLikesUserChallenges();\n      break;\n    }\n    case \"views\": {\n      userChallengesFiltered = topViewsUserChallenges();\n      break;\n    }\n    case \"createDate\": {\n      userChallengesFiltered = latestUserChallenges();\n      break;\n    }\n    default: {}\n  }\n  return userChallengesFiltered;\n  //return <CardsScroll items={userChallengesFiltered} origin=\"challenge\" />\n}\n\n\n\nexport const listByFilters = (items, type, sort) => {\n\n  const sortByLikes = (arr) => arr.sort((a, b) => b.likes-a.likes);\n  const sortByViews = (arr) => arr.sort((a, b) => b.views-a.views);\n  const sortByCreateAt = (arr) => arr.sort((a, b) => {\n    return (Date.parse(b.createdAt) - Date.parse(a.createdAt) > 0) ? 1 : -1\n//    return (Date.parse(b.evidences[b.evidences.length - 1].createdAt) - Date.parse(a.evidences[a.evidences.length - 1].createdAt) > 0) ? 1 : -1 \n//quizas esta linea de arriba la necesite para implementar bien el creatAt cuando son userchallenges...\n  });\n\n  let filteredArr = [];\n\n  switch (sort) {\n    case 'likes': {\n      filteredArr = sortByLikes(items);\n      break; \n    }\n    case 'views': {\n      filteredArr = sortByViews(items);\n      break;\n    }\n    case 'createDate': {\n      filteredArr = sortByCreateAt(items);\n      break;\n    }\n    default: {}\n  }\n  return filteredArr;\n}\n\n\n\n /*  if (type === 'challenge') {\n    switch (sort) {\n      case 'likes': {\n        filteredArr = sortByLikes(challenges);\n        break; \n      }\n      case 'views': {\n        filteredArr = sortByViews(challenges);\n        break;\n      }\n      case 'createDate': {\n        filteredArr = sortByCreateAt(challenges);\n        break;\n      }\n      default: {}\n    }\n    return this.listChallenges(filteredArr);\n  } else {  //type == userChallenge...\n    switch (sort) {\n      case 'likes': {\n        filteredArr = sortByLikes(userChallenges);\n        break; \n      }\n      case 'views': {\n        filteredArr = sortByViews(userChallenges);\n        break;\n      }\n      case 'createDate': {\n        filteredArr = sortByCreateAt(userChallenges);\n        break;\n      }\n      default: {}\n    } */\n//   }\n// }\n\n\n\n\n/* \nexport {\n  showUsersChallenge,\n  listByFilters\n} */","import React from 'react';\nimport { createPortal } from 'react-dom';\nimport 'moment-timezone';\n\n\nconst Modal = ({ children }) => {\n\n  return createPortal((\n    <div className=\"modal-container\">\n      <div className=\"modal-app\">\n        {children}\n      </div>\n    </div>\n  ),\n    document.querySelector('body'),\n  );\n}\n\nexport default Modal;","import React from 'react';\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport { REGEX_IMAGE, REGEX_VIDEO } from '../constants'\n\nconst Carousel = (props) => {\n\n  const { evidences, order } = props\n\n  const isActive = (index) => ( index === order ) && \"active\";\n  \n  const isImageOrVideo = (evidence, index) => {\n    if ( evidence.file.match(REGEX_IMAGE )) {\n      return (\n        <div className={`crsl-container carousel-item ${isActive(index)}`} key={index}>\n          <img className=\"crsl-img\" src={evidence.file} alt={`slide ${index}`}/>\n          <Moment className=\"h6\" format=\"DD/MM/YYYY\">{evidence.createdAt}</Moment>\n          <div>{evidence.comments}</div>\n\n      </div>)\n    }\n    if ( evidence.file.match(REGEX_VIDEO )) {\n      return (\n        <div className={`crsl-container carousel-item ${isActive(index)}`} key={index}>\n        <video key={index} className=\"crsl-img\" width=\"100%\" controls>\n          <source src={evidence.file} type=\"video/ogg\"/>\n        </video> \n      </div>)\n    }\n  }\n\n    return (\n      <div id=\"carouselExampleControls\" className=\"carousel slide\" data-ride=\"carousel\">\n        \n        <div className=\"carousel-inner\">\n          { evidences.map( (evidence, index) => { return isImageOrVideo(evidence, index) }) }\n        </div>\n\n        <a className=\"carousel-control-prev\" href=\"#carouselExampleControls\" role=\"button\" data-slide=\"prev\">\n          <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n          <span className=\"sr-only\">Previous</span>\n        </a>\n        <a className=\"carousel-control-next\" href=\"#carouselExampleControls\" role=\"button\" data-slide=\"next\">\n          <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n          <span className=\"sr-only\">Next</span>\n        </a>\n      </div>\n    );\n}\n\nexport default Carousel;\n","import React from 'react';\nimport Carousel from './Carousel';\n\n\nconst EvidencesModal = (props) => {\n\n  const { title, \n          propAvatar, \n          propNickname, \n          evidences, \n          modalOrder,\n          onShowModal } = props\n\n  return (\n    <React.Fragment>\n      <div className=\"col-2 modal-col\">\n        <div className=\"modal-header\">\n          <div className=\"mb-1 pr-5 align-self-end\">\n            <h5>{title}</h5>\n            <div className=\"mt-3\">\n              <span><small>Reto de </small></span>\n              <img className=\"rounded-circle avatar-user ml-1\" src={propAvatar} alt={propNickname}></img>\n              <span className=\"mx-1 pl-1\"><strong>{propNickname}</strong></span>\n            </div>\n          </div>\n          <div className=\"modal-close\" onClick={onShowModal}><i className=\"fas fa-times-circle\"></i></div>\n        </div>\n      </div>\n      <div className=\"col-8 modal-col\">\n        <Carousel evidences={evidences} order={modalOrder}/>\n      </div>\n      {/* <div className=\"col-2 modal-col\">\n        <div className=\"\" >{evidences[0].comments}</div>\n        <div className=\"\" >\n          <Moment className=\"h6\" format=\"DD/MM/YYYY\">{evidences[0].createdAt}</Moment>\n        </div>\n      </div> */}\n    </React.Fragment>\n  )\n}\n\nexport default EvidencesModal;","import React, { Component } from 'react';\nimport usersService from '../../services/usersService';\nimport CardsRow from '../../ui/CardsRow';\nimport { withAuthConsumer } from '../../context/AuthStore';\nimport { SELECT_SORTS, MIRROR_SELECT_SORTS } from '../../constants';\nimport { Select, FormField } from 'grommet';\nimport { listByFilters } from '../../utils/handleLogicSelects'; \nimport Modal from '../misc/Modal';\nimport EvidencesModal from '../../ui/EvidencesModal';\n\n\nclass Profile extends Component {\n\n  state = {\n    userId: this.props.match.params.userId || this.props.user.id,\n    userChallengesInProcess: [],\n    userChallengesFinished: [],\n    challenges: [],\n    optionUserChallengeInProcessFiltered: SELECT_SORTS['createDate'],\n    optionUserChallengeFinishedFiltered: SELECT_SORTS['createDate'],\n    optionChallengeFiltered: SELECT_SORTS['createDate'],\n    showModal: false,\n    itemToShow: {},\n    modalOrder: 0,\n  }\n  \n  componentDidMount() {\n    \n    //const { userId } = this.props.match.params;\n\n    const { userId } = this.state;\n    const p1 = usersService.getChallengesByUser(userId);\n    const p2 = usersService.getUserChallengesByUser(userId);\n    //const p3 = usersService.getUserChallengesInProcessByUser(userId);\n\n    \n    Promise.all([p1, p2])\n    .then(([challenges, userChallenges]) => {\n      console.log(\"los UC finished son \", userChallenges)  \n      console.log(\"los CHALL son \", challenges)  \n      \n      this.setState({\n        ...this.state,\n        challenges: challenges,\n        userChallengesFinished: userChallenges.filter(userChallenge => userChallenge.isFinished),\n        userChallengesInProcess: userChallenges.filter(userChallenge => !userChallenge.isFinished)\n      })\n    }, \n    error => console.log(error)\n    ) \n  }\n  \n  /* formatFieldsChallenges = () => {\n    const { challenges } = this.state;\n    console.log(\"formateando..\", challenges)\n    if (challenges.length) {\n      return challenges.map(challenge => (\n        { id: challenge.id,\n          file: challenge.photo,\n          comments: challenge.title\n        }\n        ))\n        \n      } else {\n        return [];\n      }\n    } */\n\n    onShowModal = (order, itemId) => {\n      const itemFinished = this.state.userChallengesFinished.filter( userChallenge => userChallenge.id === itemId ); \n      const itemInProcess = this.state.userChallengesInProcess.filter( userChallenge => userChallenge.id === itemId ); \n      let item = [];\n      ( itemFinished.length !== 0 ) ? item = itemFinished : item = itemInProcess\n      this.setState({\n        ...this.state,\n        showModal: !this.state.showModal,\n        modalOrder: ( order >= 0 ) ? order : this.state.modalOrder,\n        itemToShow: item[0]\n      })\n    }\n    \n    \n    render() {\n    \n      const { challenges,\n              modalOrder,\n              itemToShow,  \n              userChallengesInProcess, \n              userChallengesFinished, \n              optionChallengeFiltered, \n              optionUserChallengeInProcessFiltered, \n              optionUserChallengeFinishedFiltered } = this.state;\n\n     // const formattedChallenges = this.formatFieldsChallenges();\n     // console.log((\"fortmateados: \", formattedChallenges))\n\n      return (        \n        <div className=\"container my-3\">\n\n        \n\n          {this.state.showModal && (\n            <Modal>\n              <EvidencesModal title={itemToShow.challengeId.title} \n                              propAvatar={itemToShow.userId.avatarURL} \n                              propNickname={itemToShow.userId.nickName} \n                              evidences={itemToShow.evidences} \n                              modalOrder={modalOrder}\n                              onShowModal={this.onShowModal}\n              />\n            </Modal>\n          )}\n\n          <div className=\"row justify-content-between align-items-center mx-0 mb-0 mt-2\">\n            <h6 className=\"m-0\">Logros en proceso:</h6>\n            <div className=\"col-5\">\n              <FormField>\n                <Select\n                  className=\"p-1\"\n                  placeholder=\"Ordenar por\"\n                  options={Object.values(SELECT_SORTS)}\n                  value={optionUserChallengeInProcessFiltered}\n                  size=\"small\"\n                  onChange={event => { this.setState({ optionUserChallengeInProcessFiltered: event.option })}}\n                />\n              </FormField>\n            </div>\n          </div>\n          <CardsRow \n            items={listByFilters(userChallengesInProcess, \"userChallenges\", MIRROR_SELECT_SORTS[optionUserChallengeInProcessFiltered])} \n            type=\"userChallenge\"\n            origin=\"profile\"\n            textAlternative=\"Ya estás tardando en echarle Webos y estrenar este área ...\"\n            onShowModal={this.onShowModal} \n          />\n\n        \n          <div className=\"row justify-content-between align-items-center mx-0 mb-0 mt-2\">\n            <h6 className=\"m-0\">Logros realizados:</h6>\n            <div className=\"col-5\">\n              <FormField>\n                <Select\n                  className=\"p-1\"\n                  placeholder=\"Ordenar por\"\n                  options={Object.values(SELECT_SORTS)}\n                  value={optionUserChallengeFinishedFiltered}\n                  size=\"small\"\n                  onChange={event => { this.setState({ optionUserChallengeFinishedFiltered: event.option })}}\n                />\n              </FormField>\n            </div>\n          </div>\n          <CardsRow \n            items={listByFilters(userChallengesFinished, \"userChallenges\", MIRROR_SELECT_SORTS[optionUserChallengeFinishedFiltered])} \n            type=\"userChallenge\"\n            origin=\"profile\"\n            textAlternative=\"Ya estás tardando en echarle Webos y estrenar este área ...\"\n            onShowModal={this.onShowModal} \n          />\n\n          <div className=\"row justify-content-between align-items-center mx-0 mb-0 mt-2\">\n            <h6 className=\"m-0\">Retos creados:</h6>\n            <div className=\"col-5\">\n              <FormField>\n                <Select\n                  className=\"p-1\"\n                  placeholder=\"Ordenar por\"\n                  options={Object.values(SELECT_SORTS)}\n                  value={optionChallengeFiltered}\n                  size=\"small\"\n                  onChange={event => { this.setState({ optionChallengeFiltered: event.option })}}\n                />\n              </FormField>\n            </div>\n          </div>\n          <CardsRow \n            items={listByFilters(challenges, \"challenges\", MIRROR_SELECT_SORTS[optionChallengeFiltered])} \n            type=\"challenge\"\n            origin=\"profile\"\n            textAlternative=\"¡Venga! anímate y lanza algún reto!\"\n          />\n      </div>\n    );\n  }\n}\n\nexport default withAuthConsumer(Profile);\n","import axios from 'axios';\nimport { BehaviorSubject } from 'rxjs';\n\nconst http = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:3001',\n  withCredentials: true\n})\n\n\n\nlet userChallengeDetail = [];\nlet CURRENT_CHALLENGES_KEY = 'current-challenges';\nlet CURRENT_USER_CHALLENGES_KEY = 'current-user-challenges'\nlet challenges = JSON.parse(localStorage.getItem(CURRENT_CHALLENGES_KEY) || '[]')\nlet userChallenges = JSON.parse(localStorage.getItem(CURRENT_USER_CHALLENGES_KEY) || '[]')\nconst challenges$ = new BehaviorSubject(challenges);\nconst userChallengeDetail$ = new BehaviorSubject(userChallengeDetail);\nconst userChallenges$ = new BehaviorSubject(userChallenges);\n\n\nconst getChallenges = () => {\n\n  return http.get('/challenges')\n    .then(response => {\n      challenges = response.data;\n      localStorage.setItem(CURRENT_CHALLENGES_KEY, JSON.stringify(challenges));\n      challenges$.next(challenges);\n      return challenges;\n    })\n}\n\n\nconst createChallenge = (challenge, imgKey) => {\n\n  const config = {\n    headers: {\n      'content-type': 'multipart/form-data'\n    }\n  };\n  const data = new FormData();\n\n  Object.keys(challenge).forEach(key => {\n    if ( key === imgKey && challenge[key]) {\n      data.append(key, challenge[key].target.files[0])\n    } else {\n      data.append(key, challenge[key])\n    }\n  })\n  return http.post('/challenges', data, config)\n  .then(response => {\n      getChallenges();\n      return response.data;\n    })\n}\n\n\nconst getChallengeDetail= (challengeId) => {\n  return http.get(`/challenges/${challengeId}`)\n    .then(response => response.data)\n}\n\nconst getUserChallengeDetail = (UserChallengeId) => {\n  return http.get(`/user-challenges/${UserChallengeId}`)\n    .then(\n      response => {\n        userChallengeDetail = response.data;\n        userChallengeDetail$.next(userChallengeDetail);\n        return userChallengeDetail;\n      })\n}\n\n\nconst getUserChallenges = () => {\n  return http.get('/user-challenges')\n    .then(response => {\n      userChallenges = response.data;\n      localStorage.setItem(CURRENT_USER_CHALLENGES_KEY, JSON.stringify(userChallenges));\n      userChallenges$.next(userChallenges);\n      return userChallenges;\n    })\n}\n\nconst getUserChallengesFinishedByChallenge = (challengeId) => {\n  return http.get(`challenges/${challengeId}/user-challenges`)\n    .then(response => response.data)\n}\n\n\nconst createUserChallenge = (challenge) => {\n  return http.post(`/challenges/${challenge}/user-challenges`)\n    .then(response => response.data)\n}\n\nconst updateUserChallenge = (userChallenge, isFinished) => {\n  return http.post(`/user-challenges/${userChallenge}`, {isFinished})\n    .then(response => response.data)\n}\n\n\nconst addChallengeToLikes = (challengeId) => {\n  return http.post(`/challenges/${challengeId}/likes`)\n    .then (response => {\n      getChallenges()\n        .then(() => console.log(\"fetch challenges\"))\n      return response.data;\n    })\n}\n\n\nconst removeChallengeFromLikes = (challengeId) => {\n  return http.delete(`/challenges/${challengeId}/likes`)\n    .then(response => {\n      getChallenges()\n        .then(() => console.log(\"fetch challenges\"))\n      return response.data;\n    })\n}\n\n\nconst addUserChallengeToLikes = (userChallengeId) => {\n\n  return http.post(`/user-challenges/${userChallengeId}/likes`)\n    .then (response => {\n      getUserChallenges()\n        .then(() => console.log(\"fetch userChallenges\"))\n      return response.data;\n    })\n}\n\n\nconst removeUserChallengeFromLikes = (userChallengeId) => {\n\n  return http.delete(`/user-challenges/${userChallengeId}/likes`)\n    .then(response => {\n      getUserChallenges()\n        .then(() => console.log(\"fetch userChallenges\"))\n      return response.data;\n    })\n}\n\n\nconst addViewToChallenge = (challengeId) => {\n\n  return http.post(`/challenges/${challengeId}/views`)\n    .then(response => {\n      return response.data;\n    })\n}\n\nconst addParticipantToChallenge = (challengeId) => {\n\n  return http.post(`challenges/${challengeId}/new-participant`)\n    .then(response => {\n      return response.data\n    })\n}\n\n\nconst addViewToUserChallenge = (userChallengeId) => {\n\n  return http.post(`/user-challenges/${userChallengeId}/views`)\n    .then(response => {\n      return response.data;\n    })\n}\n\nconst createEvidence = (evidence, imgKey, userChallengeId) => {\n  const config = {\n    headers: {\n      'content-type': 'multipart/form-data'\n    }\n  };\n  const data = new FormData();\n  Object.keys(evidence).forEach(key => {\n    if ( key === imgKey && evidence[key]) {\n      data.append(key, evidence[key].target.files[0])\n    } else {\n      data.append(key, evidence[key])\n    }\n  })\n  return http.post(`/user-challenges/${userChallengeId}/evidences`, data, config)\n  .then(response => response.data);\n}\n\nconst onChallengesChange = () => challenges$.asObservable();\nconst onUsersChallengeDetailChange = () => userChallengeDetail$.asObservable();\nconst onUserChallengesChange = () => userChallenges$.asObservable();\n\nexport default {\n  getChallenges,\n  getChallengeDetail,\n  createChallenge,\n  getUserChallenges,\n  getUserChallengeDetail,\n  onChallengesChange,\n  onUserChallengesChange,\n  onUsersChallengeDetailChange,\n  createUserChallenge,\n  updateUserChallenge,\n  addChallengeToLikes,\n  removeChallengeFromLikes,\n  addUserChallengeToLikes,\n  removeUserChallengeFromLikes,\n  addViewToChallenge,\n  addViewToUserChallenge,\n  createEvidence,\n  addParticipantToChallenge,\n  getUserChallengesFinishedByChallenge\n}\n","import React, { Component } from 'react';\nimport Select from 'react-select';\n\n\nclass SelectUsers extends Component {\n\n  state = {\n    isOpen: false,\n  }\n\n  handleMenuToggle = () => {\n  console.log(\"mnajejador TOGGLLEEEEE \", this.state.isOpen)\n    this.setState({\n      isOpen: !this.state.isOpen\n    })\n  }\n\n  handleChange = (event) => {\n    console.log(\"ONCHANGEE \", this.state.isOpen)\n    this.props.handleChangeUsers(event);\n  }\n\n\n\n  render() {\n    return (\n      <Select\n      options={this.props.options}\n      menuIsOpen={this.state.isOpen}\n      isMulti\n      isSearchable\n      onMenuClose={this.handleMenuToggle}\n      onMenuOpen={this.handleMenuToggle}\n      //value={this.props.value}\n      onChange={this.props.handleChange}\n      placeholder={this.props.placeholder}\n    />\n    )\n  }\n}\n\nexport default SelectUsers;\n","import axios from 'axios';\nimport { BehaviorSubject } from 'rxjs';\n\n\nconst http = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:3001',\n  withCredentials: true\n})\n\nlet CURRENT_USER_CHALLENGES_PENDING_KEY = 'current-user-challenges-pending'\nlet userChallengesPending = JSON.parse(localStorage.getItem(CURRENT_USER_CHALLENGES_PENDING_KEY) || '[]')\nconst userChallengesPending$ = new BehaviorSubject(userChallengesPending);\n\n\nconst createUserChallengesByNotifications = (body) => {\n  return http.post('/user-challenges/create-notifications', body)\n    .then(response => response.data)\n}\n\n\nconst getUserChallengesPending = () => {\n  return http.get('/user-challenges/pending')\n    .then(response => {\n      const userChallengesPending = response.data;\n      localStorage.setItem(CURRENT_USER_CHALLENGES_PENDING_KEY, JSON.stringify(userChallengesPending));\n      userChallengesPending$.next(userChallengesPending);\n      return userChallengesPending;\n    })\n}\n\n\nconst onUserChallengesPendingChange = () => userChallengesPending$.asObservable();\n\n\nexport default {\n  createUserChallengesByNotifications,\n  getUserChallengesPending,\n  onUserChallengesPendingChange\n} \n","import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { TextArea, Button, Select, FormField, Form } from 'grommet';\nimport authService from '../../services/authService';\nimport usersService from '../../services/usersService';\nimport challengesService from '../../services/challengesService';\nimport CardsRow from '../../ui/CardsRow';\nimport { SELECT_SORTS, MIRROR_SELECT_SORTS, LIMIT_AVATARS_LIST } from '../../constants';\nimport { listByFilters } from '../../utils/handleLogicSelects';\nimport Modal from '../misc/Modal';\nimport SelectUsers from '../../ui/SelectUsers';\nimport userChallengesServices from '../../services/userChallengesService';\nimport EvidencesModal from '../../ui/EvidencesModal';\n\n\nclass ChallengeDetail extends Component {\n  \n  state = {\n    user: {},\n    challenge: {},\n    userChallenges: [],\n    isAlreadyJoined: false,\n    isJoinedNow: '',\n    optionFiltered: SELECT_SORTS['likes'],\n    showModalEvidences: false,\n    showModalSendChallenge: false,\n    itemToShow: {},\n    modalOrder: 0,\n    listUsers: [],\n    usersSelected: [],\n    comment:''\n  }\n\n  userSubscription = undefined;\n\n\n  \n  componentDidMount() {\n    this.userSubscription = authService.onUserChange().subscribe((user) => {\n      this.setState({\n        ...this.state,\n        user: user\n      })\n    })\n\n    const p1 = challengesService.getChallengeDetail(this.props.match.params.challengeId)\n    const p2 = challengesService.getUserChallengesFinishedByChallenge(this.props.match.params.challengeId)\n\n      Promise.all([p1, p2])\n      .then(([challenge, userChallenges]) => {\n        this.setState({\n        ...this.state,\n        challenge: challenge,\n        userChallenges: userChallenges\n        })\n      })\n      .catch(err => console.log(err));\n  } \n\n\n  componentWillUnmount() {\n    this.userSubscription.unsubscribe();\n  }\n\n\n  objectIdInArray = (userId, userChallenge) => {\n    let userIdAux = JSON.stringify(userId);\n    let arrAux = userChallenge.map(object => JSON.stringify(object.userId.id));\n    return arrAux.includes(userIdAux);\n  }\n\n\n  onClickJoin = () => {       \n    challengesService.createUserChallenge(this.state.challenge.id)\n      .then(\n        (response) => \n          this.setState({\n            ...this.state,\n            isJoinedNow: response.id\n          }),\n        error => console.log(error)\n      )\n  }\n\n\n  onClickChallengeOthers = () => {\n    console.log('retar a otros')\n    usersService.getUsers()\n      .then(response => {\n        this.setState({\n          ...this.state,\n          showModalSendChallenge: !this.state.showModalSendChallenge,\n          listUsers: response.filter(user => JSON.stringify(this.state.user.id) !== JSON.stringify(user.id))\n         // pruebaSelect: true\n        })\n      })\n    //IMPLEMENTAR LA LÓGICA PARA RETAR A OTROS!!!\n  }\n\n  onHideModalSendChallenge = () => {\n    this.setState({\n      ...this.state,\n      showModalSendChallenge: false\n    })\n  }\n\n  countUserChallenges = () => \n    (this.state.challenge.userChallenges) ?\n      this.state.challenge.userChallenges.length : 0;\n  \n\n  countUserChallengesFinished = () =>   \n    (this.state.challenge.userChallenges) ?\n      this.state.challenge.userChallenges\n        .filter(userChallenge => userChallenge.Finished)\n        .length : 0;\n\n\n  createListAvatarsUserChallenges = () => {\n    const { userChallenges } = this.state;\n    if (this.state.userChallenges) {\n      return this.state.userChallenges\n      .slice(0, LIMIT_AVATARS_LIST)\n          .map((userChallenge, index, arr) => {\n            if (index === (arr.length-1) && (userChallenges.length > arr.length)) {\n              return (\n                <li key={index} className=\"avatars-others\">\n                  <span className=\"avatars-others\">+{1 + userChallenges.length - arr.length}</span>\n                </li>\n              )\n            } else {\n              return (\n                <li key={index} className=\"avatars-item\">\n                  <img src={userChallenge.userId.avatarURL} className=\"avatars-img\" alt={`img-${userChallenge.userId.nickName}`}></img>\n                </li>\n              ) \n            }\n          })\n    }\n  }\n\n  onShowModalEvidences = (order, itemId) => {\n    const item = this.state.userChallenges.filter( userChallenge => userChallenge.id === itemId ); \n    this.setState({\n      ...this.state,\n      showModalEvidences: !this.state.showModalEvidences,\n      modalOrder: ( order >= 0 ) ? order : this.state.modalOrder,\n      itemToShow: item[0]\n    })\n  }\n\n  listUsersOptions = () => this.state.listUsers.map((user, index) => {\n    return {\n      ...user,\n      label: user.nickName,\n      value: index\n    }});\n\n  handleChangeUsersSelectedModal = (event) => {\n    console.log(\"\\n\\n\\nel event target lleva \", event)\n    this.setState({\n      ...this.state,\n      usersSelected: event\n    })\n  }\n\n  handleCommentModal = (event) => {\n    this.setState({\n      ...this.state,\n      comment: event.target.value\n    })\n  }\n\n  handleSubmitModal = (event) => {\n    event.preventDefault();\n    const body = {\n      usersId: this.state.usersSelected.map(user => user.id),\n      challengeId: this.state.challenge.id,\n      message: this.state.comment\n    };\n    userChallengesServices.createUserChallengesByNotifications(body)\n      .then(() => {\n        console.log('userChallenges created ok')\n        this.setState({\n          ...this.state,\n          showModalSendChallenge: false\n        })\n      });\n  }\n\n  render() {\n\n    \n    const { photo, title, description, isFinished, owner, likes, views  } = this.state.challenge;\n\n    const { optionFiltered, userChallenges, user, listUsers, ListUsersFiltered, modalOrder, itemToShow } = this.state;\n   \n    \n    if ( this.state.isJoinedNow ) {\n      return <Redirect to={`/user-challenges/${this.state.isJoinedNow}`} />\n    }\n\n    // if ( this.state.pruebaSelect ) {\n    //   return <Redirect to={`/Ejemplo`} />\n    // }\n    \n    return (\n\n      <div className=\"d-flex flex-column m-0 p-0\">\n\n        {console.log()}\n        {this.state.showModalSendChallenge && \n          <Modal>\n            <div className=\" align-items-center\">\n              <div className=\"modal-close\" onClick={this.onHideModalSendChallenge}>\n                <span className=\"text-right w-100\"><i className=\"fas fa-times-circle\"></i></span>\n              </div>\n              <div className=\"py-3 text-center\">\n                <h5>Lanza este reto a algún amigo!!</h5>\n              </div>\n              <Form onSubmit={this.state.handleSubmitModal}>\n                <div className=\"py-3\">\n                  <SelectUsers  handleChange={this.handleChangeUsersSelectedModal}\n                              options={this.listUsersOptions()}\n                              value={this.state.usersSelected}\n                              placeholder=\"Escoja uno o varios usuarios...\"\n                  />\n                </div>\n                <div className=\"py-3\">\n                  <TextArea\n                    placeholder=\"Pícalos con algún comentario...\"\n                    value={this.state.comment}\n                    onChange={this.handleCommentModal}\n                  />\n                </div>\n        \n                <div className=\"d-flex justify-content-center py-3\">\n                  <Button className=\"\" type=\"submit\" primary label=\"Notificar!\" onClick={this.SendChallengeToUsers} />\n                </div>\n              </Form>\n            </div>\n          </Modal>\n        }\n\n        {this.state.showModalEvidences && (\n          <Modal>\n          <EvidencesModal title={title} \n                          propAvatar={itemToShow.userId.avatarURL} \n                          propNickname={itemToShow.userId.nickName} \n                          evidences={itemToShow.evidences} \n                          modalOrder={modalOrder}\n                          onShowModal={this.onShowModalEvidences}\n          />\n          </Modal>\n        )}\n      \n        <div className=\"chl-det-header p-0\">\n          <img src={photo} alt={title}></img>\n          <div className=\"overlay p-0 container\">\n          <div className=\"\">\n            <div className=\"row justify-content-around align-items-center my-2 mx-1\">\n              <p className=\"m-0\"><i className=\"m-0 fas fa-thumbs-up fa-lg\"></i></p>\n              <h5 className=\"m-0\">{likes}</h5>\n            </div>\n            <div className=\"row justify-content-around align-items-center my-2 mx-1\">\n              <p className=\"m-0\"><i className=\" m-0 fas fa-eye fa-lg\"></i></p>\n              <h5 className=\"m-0\">{views}</h5>\n            </div>\n            <div className=\"row justify-content-around align-items-center my-2 mx-1\">\n              <p className=\"m-0\"><i className=\" m-0 fas fa-users fa-lg\"></i></p>\n              <h5 className=\"m-0\">{this.countUserChallenges()}</h5>\n            </div>\n            <div className=\"row justify-content-around align-items-center my-2 mx-1\">\n              <p className=\"m-0\"><i className=\" m-0 fas fa-trophy fa-lg\"></i></p>\n              <h5 className=\"m-0\">{this.countUserChallengesFinished()}</h5>\n            </div>\n          </div>\n          </div>\n        </div>\n        <div className=\"container\">\n          <div className=\"col-12 mt-2 p-0\">\n            <h3><u>{title}</u></h3>\n            <span>{description}</span>\n            <p className=\"m-0 text-right\">Creado por:  \n              <img src={owner && owner.avatarURL} className=\"avatar-user rounded-circle ml-2 mr-1\"></img>\n              <span className=\"font-weight-bold\">{owner && owner.nickName }</span>\n            </p>\n          </div>\n          <hr className=\"my-1\"></hr>\n          <div className=\"col-12 m-0 d-flex flex-row justify-content-around\">\n            <Button className=\"py-1 px-2 m-1\" type=\"button\" primary label=\"Unirse al reto!\" disabled={this.objectIdInArray(user.id, userChallenges)} onClick={this.onClickJoin}  />\n            <Button className=\"py-1 px-2 m-1\" type=\"button\" primary label=\"Retar a otros\" onClick={this.onClickChallengeOthers} />\n          </div>\n\n            <h6 className=\"mt-3\">Logros conseguidos por otros usuarios:</h6>\n            <div className=\"row justify-content-between align-items-center my-1\">\n\n              <div className=\"col\">\n              <ul className=\"avatars\">\n                { this.createListAvatarsUserChallenges()}\n              </ul>\n              </div>\n              <div className=\"col-5\">\n                <FormField>\n                  <Select\n                    className=\"p-1\"\n                    placeholder=\"Ordenar por\"\n                    options={Object.values(SELECT_SORTS)}\n                    value={this.state.optionFiltered}\n                    size=\"small\"\n                    onChange={event => { this.setState({ optionFiltered: event.option })}}\n                  />\n                </FormField>\n              </div>\n            </div>\n            \n            <CardsRow\n              items={listByFilters(userChallenges, \"userChallenge\", MIRROR_SELECT_SORTS[optionFiltered])} \n              type=\"userChallenge\" \n              origin=\"challenge\"\n              textAlternative=\"No ha habido Webos aún de hacer este reto...\"\n              onShowModal={this.onShowModalEvidences} \n            />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ChallengeDetail;\n","import React, { Component } from 'react';\nimport { TextArea, Box, Text  } from 'grommet';\n\nclass TextAreaInput extends Component {\n\n  handleChange = (event) => {\n    const name = this.props.name;\n    this.props.handleChange(name, event.target.value)\n  }\n\n  render() {\n    const {\n      label,     \n      value,\n      placeholder,\n      errors,\n      onblur,\n      type,\n      onChange,\n    } = this.props;\n\n    const hasErrors = errors && errors.length > 0;\n\n    return (\n      <Box margin={{top: \"medium\"}}>\n        <Text margin={{bottom: \"xsmall\"}}>{label}</Text>\n        <TextArea \n          align=\"center\"\n          margin=\"\"\n          onChange={onChange}\n          value={value}\n          {...(type ? { type } : null)}\n          {...(placeholder ? { placeholder } : null)}\n          {...(onblur ? { onBlur: onblur } : null)}\n        />\n        {hasErrors &&\n          errors.map((error, index) => (\n            <Text\n              key={index} \n              size=\"small\" \n              color=\"status-error\" \n              margin={{top: \"xsmall\", left:\"small\"}}>\n              {error}\n            </Text>\n          ))}\n\n      </Box>\n    );\n  }\n}\n\nexport default TextAreaInput;","import React, { Component } from 'react';\nimport { Select, Box, Text  } from 'grommet';\n\nclass SelectInput extends Component {\n  render() {\n    const { \n      onChange,\n      errors,\n      options,\n      value,\n      correlationNames\n    } = this.props;\n\n    const hasErrors = errors && errors.length > 0;\n    return (\n      <Box margin={{top: \"medium\"}}>\n      <Text margin={{bottom: \"xsmall\"}}>Tipo de reto:</Text>\n      <Select\n        onChange={onChange}\n        options={options}\n        value={correlationNames[value]}\n        children={(option) => {\n          return correlationNames[option]\n        }}\n      />\n      {hasErrors &&\n        errors.map((error, index) => (\n          <Text\n            key={index} \n            size=\"small\" \n            color=\"status-error\" \n            margin={{top: \"xsmall\", left:\"small\"}}>\n            {error}\n          </Text>\n        ))}\n      </Box>\n    )\n  }\n}\n\nexport default SelectInput;","import React, { Component, Fragment } from 'react';\nimport authService from '../../services/authService';\nimport { Box, Form, Text, Button } from 'grommet';\nimport { Redirect } from 'react-router-dom';\nimport InputField from '../misc/forms/InputField';\nimport FileInput from '../misc/forms/FileInput';\nimport TextAreaInput from '../misc/forms/TextAreaInput';\nimport SelectInput from '../misc/forms/SelectInput'\nimport {\n  checkLength,\n  checkDate,\n  checkDuration,\n  checkPeriodicity\n} from '../../utils/formValidators';\nimport { createForm } from '../../utils/createForm'\nimport challengeSelect from '../../utils/challenge-types.json';\nimport challengesService  from '../../services/challengesService';\nimport challengeDescription from '../../utils/challenge-descriptions.json';\nimport errors from '../../utils/errors.json';\n\nconst challengeOptions = Object.keys(challengeSelect);\n\nconst getChallengeDescriptionText = text => {\n  return challengeDescription[text];\n}\n\nconst getErrorText = text => errors[text];\n\nclass ChallengeCreate extends Component {\n  state = {\n    user: {},\n    errors: {},\n    isCompleted: false\n  }\n\n  userSubscription = undefined;\n\n  componentDidMount() {\n    this.userSubscription = authService.onUserChange().subscribe((user) => {\n      this.setState({\n      ...this.state,\n      user: user\n      })\n    })\n  }\n\n  componentWillUnmount() {\n    this.userSubscription.unsubscribe();\n  }\n  \n  handleSubmit = (event) => {\n    const { form } = this.props;\n    event.preventDefault();\n    \n    form.validateFields((errors, fields) => {\n      const hasErrors = errors && Object.keys(errors).length > 0;\n      if (!hasErrors) {\n        const updatedFields = {\n          ...fields,\n          owner: this.state.user.id\n        }\n        challengesService.createChallenge(updatedFields, 'fileChallenge')\n        .then(\n          (response) =>  this.setState({ challengeId: response.id }), \n          error => {\n            const { error: errorResponse } = error.response.data;\n            this.setState({\n              errors: {\n                ...this.state.errors,\n                ...errorResponse.errors,\n              }\n          })\n        }) \n      }\n    });\n  };\n\n  render() {\n\n    if ( this.state.challengeId ) {\n      return <Redirect to={`/challenges/${this.state.challengeId}`} />\n    }\n    \n    const { form } = this.props;\n    const { getFieldProps, getFieldError, setFieldsValue } = form;\n    const { errors } = this.state;\n    return (\n      <Box margin=\"large\">\n        <Form onSubmit={this.handleSubmit}>\n\n          <InputField\n            label=\"Nombre:\"\n            placeholder=\"Un dibujo a tinta al día!\"\n            type=\"search\"\n            {...getFieldProps('title', {\n              initialValue: '',\n              validateFirst: true,\n              validateTrigger: 'onblur',\n              rules: [{ required: true, validator: checkLength}]\n            })}\n            errors={getFieldError('name')}\n            />\n\n            <FileInput\n              label=\"Imagen:\"\n              form={form}\n              name=\"fileChallenge\"\n              /> \n  \n          <TextAreaInput\n            label=\"Descripción:\"\n            placeholder=\"Describe aquí tu reto\"\n            type=\"textarea\"\n            {...getFieldProps('description', {\n              initialValue: '',\n              validateFirst: true,\n              validateTrigger: 'onblur',\n              rules: [{ required: true }]\n            })}\n            errors={getFieldError('description')}\n          />\n\n          <SelectInput \n            options={challengeOptions}\n            {...getFieldProps('type', {\n              initialValue: challengeOptions[0],\n              validateFirst: true,\n              rules: [{ required: true }]\n            })}\n            correlationNames={challengeSelect}\n            onChange={(option) => { setFieldsValue({ type: option.value })}}\n            errors={getFieldError('type')}\n          />\n\n          { (form.getFieldValue('type') === 'default') && (\n            <Box margin={{left: \"small\", top: \"small\"}}><Text size=\"small\" color=\"dark-2\">{getChallengeDescriptionText(form.getFieldValue('type'))}</Text></Box>\n          )}\n          \n          { (form.getFieldValue('type') === 'punctual') && (\n            <Fragment>\n              <Box margin={{left: \"small\", top: \"small\"}}><Text size=\"small\" color=\"dark-2\">{getChallengeDescriptionText(form.getFieldValue('type'))}</Text></Box>\n              \n              <InputField\n              label=\"Fecha:\"\n              type=\"date\"\n              {...getFieldProps('date', {\n                initialValue: '',\n                validateFirst: true,\n                validateTrigger: 'onblur',\n                rules: [{ required: true, validator: checkDate }] \n              })}\n              errors={getFieldError('date')}\n              />\n            </Fragment>\n          )}\n\n          { (form.getFieldValue('type') === 'periodic') && (\n            <Fragment>\n              <Box margin={{left: \"small\", top: \"small\"}}><Text size=\"small\" color=\"dark-2\">{getChallengeDescriptionText(form.getFieldValue('type'))}</Text></Box>\n\n              <InputField\n                label=\"Duración (en días):\"\n                type=\"number\"\n                {...getFieldProps('duration', {\n                  initialValue: '',\n                  validateFirst: true,\n                  validateTrigger: 'onblur',\n                  rules: [{ required: true, validator: checkDuration }] \n                })}\n                errors={getFieldError('duration')}\n              />\n  \n              <InputField\n                label=\"Periodicidad (en días):\"\n                type=\"number\"\n                {...getFieldProps('periodicity', {\n                  initialValue: '',\n                  validateFirst: true,\n                  validateTrigger: 'onblur',\n                  rules: [{ required: true, validator: checkPeriodicity }] \n                })}\n                errors={getFieldError('periodicity')}\n              />\n            </Fragment>\n          )}\n\n\n\n          { (form.getFieldValue('type') === 'expiration') && (\n            <Fragment>\n              <Box margin={{left: \"small\", top: \"small\"}}><Text size=\"small\" color=\"dark-2\">{getChallengeDescriptionText(form.getFieldValue('type'))}</Text></Box>\n\n              <InputField\n                label=\"Duración (en días):\"\n                type=\"number\"\n                {...getFieldProps('duration', {\n                  initialValue: '',\n                  validateFirst: true,\n                  validateTrigger: 'onblur',\n                  rules: [{ required: true, validator: checkDuration }] \n                })}\n                errors={getFieldError('duration')}\n              />\n            </Fragment>\n          )}\n\n          <Button \n            type=\"submit\" primary label=\"Crear reto\" margin={{top: \"medium\", bottom: \"small\"}} fill />\n        \n          {errors && Object.keys(errors).length > 0 && (\n            Object.keys(errors).map((key, index) => (\n            <Box key={index}>\n              <Text \n                alignSelf=\"center\"\n                size=\"small\" \n                color=\"status-error\" \n                margin={{top: \"medium\", left:\"small\"}}>\n                {getErrorText(errors[key].message)}\n              </Text>\n            </Box>\n            )) \n          )}\n\n        </Form>\n      </Box>\n    );\n  }\n}\n\nexport default createForm()(ChallengeCreate);\n","import axios from 'axios';\n\nconst http = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:3001',\n  withCredentials: true\n})\n\nconst create = (evidence, imgKey) => {\n  const challengeId = '';\n  const userChallengeId = '';\n\n  const config = {\n    headers: {\n      'content-type': 'multipart/form-data'\n    }\n  };\n  const data = new FormData();  \n  Object.keys(evidence).forEach(key => {\n    if ( key === imgKey && evidence[key]) {\n      data.append(key, evidence[key].target.files[0])\n    } else {\n      data.append(key, evidence[key])\n    }\n  })\n  return http.post(`/challenges/${challengeId}/user-challenges/${userChallengeId}/evidences`, data, config)\n    .then(response => response.data);\n}\n\nconst getEvidencesList = (userChallengeId) => {\n  return http.get(`/user-challenges/${userChallengeId}/evidences`)\n  .then(response => response.data)\n}\n\nconst evidenceDelete = (userChallengeId, evidenceId) => {\n  return http.delete(`/user-challenges/${userChallengeId}/evidences/${evidenceId}`)\n  .then(response => response.data)\n}\n \n\nexport default {\n  create,\n  getEvidencesList,\n  evidenceDelete\n}","import React from 'react';\n\nconst ProgressBar = (props) =>  {\n  return (\n  <div className=\"progress-bar-content\">\n    <div className=\"progress-bar-second\"></div>\n    <div className=\"progress-bar-progress\" style={{backgroundImage: `linear-gradient(to left, white ${props.gradient}%, transparent 0%)`}}></div>\n  </div>\n  );\n}\n\nexport default ProgressBar;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button, Box, Form, Text } from 'grommet';\nimport InputField from '../misc/forms/InputField';\nimport FileInput from '../misc/forms/FileInput';\nimport { createForm } from '../../utils/createForm'\nimport challengesService from '../../services/challengesService';\nimport errors from '../../utils/errors.json';\nimport icons from '../../utils/icons.json';\nimport CardScroll from '../../ui/CardsScroll';\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport authService from '../../services/authService';\nimport evidencesService from '../../services/evidencesService';\nimport ProgressBar from '../../ui/ProgressBar';\nimport { DEFAULT_ICON_OPACITY } from '../../constants'\nimport Modal from '../misc/Modal';\nimport EvidencesModal from '../../ui/EvidencesModal';\n\nconst getErrorText = text => errors[text];\nconst getIconText = text => icons[text];\n\nclass UserChallenge extends Component {\n\n  state = {\n    userChallenge: {},\n    evidences: {},\n    totalEvidences: 1,\n    errors: {},\n    challengeOwner: {},\n    isFinished: false,\n    isVisibleForm: false,\n    rangeValue: 1,\n    opacityHen: {\n      opacity: \"1\"\n    },\n    opacityViking: {\n      opacity: \"0.15\"\n    },\n    showModal: false,\n    modalOrder: 0\n  }\n\n\n  componentDidMount() {\n    challengesService.getUserChallengeDetail(this.props.match.params.userChallengeId)\n      .then( userChallenge => {\n        this.setState({\n        ...this.state,\n        userChallenge: userChallenge,\n        evidences: userChallenge.evidences,\n        isFinished: userChallenge.isFinished\n        })\n        if ( this.state.userChallenge.challengeId.periodicity ) {\n          this.setState({\n            ...this.state,\n            totalEvidences: this.state.userChallenge.challengeId.duration / this.state.userChallenge.challengeId.periodicity\n          })\n        } \n\n        authService.getUserDetail(userChallenge.challengeId.owner)\n          .then( challengeOwner => {\n            this.setState({\n              ...this.state,\n              challengeOwner: challengeOwner\n            })\n            this.getProgressStatus();\n          })\n        }\n      )\n  }\n\n  onClickEvidenceForm = () => {\n    this.setState({\n      ...this.state,\n      isVisibleForm: !this.state.isVisibleForm\n    })\n  }\n\n  onShowModal = (order) => {\n    this.setState({\n      ...this.state,\n      showModal: !this.state.showModal,\n      modalOrder: ( order >= 0 ) ? order : this.state.modalOrder\n    })\n  }\n\n  getProgressStatus = () => {\n    const newRangeValue = this.state.evidences.length / this.state.totalEvidences;\n    const prevFinished = this.state.isFinished;\n    this.setState({\n      ...this.state,\n      rangeValue: newRangeValue,\n      opacityHen: {\n        opacity: (newRangeValue === 1 ) ? DEFAULT_ICON_OPACITY : 1 - newRangeValue  \n      },\n      opacityViking: {\n        opacity: (newRangeValue === 0 ) ? DEFAULT_ICON_OPACITY : newRangeValue\n      },\n      isFinished: newRangeValue === 1\n    }, () => {\n      if ( newRangeValue === 1 && this.state.isFinished !== prevFinished ) {\n        challengesService.updateUserChallenge(this.state.userChallenge.id, this.state.isFinished)\n          .then(console.log(\"actualiza la API a \", this.state.isFinished))\n      } \n      if ( newRangeValue !== 1 && this.state.isFinished !== prevFinished ) {\n        challengesService.updateUserChallenge(this.state.userChallenge.id, this.state.isFinished)\n          .then(console.log(\"actualiza la API a \", this.state.isFinished))\n      }\n    })\n\n  }\n\n  onDeleteEvidence = (evidenceId) => {\n    const newEvidences = this.state.evidences.filter(evidence => evidenceId !== evidence.id)\n    this.setState({\n      ...this.state,\n      evidences: newEvidences\n    },() => {this.getProgressStatus()\n      evidencesService.evidenceDelete(this.state.userChallenge.id, evidenceId)\n      }\n    )\n  }\n\n  handleSubmit = (event) => {\n    const { form } = this.props;\n    event.preventDefault();\n    \n    form.validateFields((errors, fields) => {\n      const userChallengeId = this.props.match.params.userChallengeId\n      const hasErrors = errors && Object.keys(errors).length > 0;\n      if (!hasErrors) {\n        challengesService.createEvidence(fields, 'fileEvidence', userChallengeId)\n        .then(\n          () => { this.setState({ isVisibleForm: false });\n                  evidencesService.getEvidencesList(this.state.userChallenge.id)\n                  .then(evidences => {\n                    console.log(evidences)\n                    this.setState({\n                    ...this.state,\n                    evidences: evidences.reverse()\n                    })\n                    this.getProgressStatus();\n                  })\n          }       \n        , \n          error => {\n            const { error: errorResponse } = error.response.data;\n            this.setState({\n              errors: {\n                ...this.state.errors,\n                ...errorResponse.errors,\n              }\n            })\n          }) \n      }\n    });\n  }\n\n    \n    render() {\n\n        const { form } = this.props;\n        const { getFieldProps, getFieldError } = form;\n        const { errors, \n                userChallenge,\n                evidences,\n                totalEvidences, \n                rangeValue, \n                challengeOwner,\n                isFinished, \n                opacityHen, \n                modalOrder,\n                opacityViking } = this.state;\n        const currentEvidences = totalEvidences - evidences.length\n        \n        return (\n          <div className=\"container\">\n            {this.state.showModal && (\n              <Modal>\n                <EvidencesModal title={userChallenge.challengeId.title} \n                                propAvatar={userChallenge.userId.avatarURL} \n                                propNickname={userChallenge.userId.nickName} \n                                evidences={evidences} \n                                modalOrder={modalOrder}\n                                onShowModal={this.onShowModal}\n                />\n              </Modal>\n            )}\n            { userChallenge.challengeId && !this.state.isVisibleForm &&\n            <Link to={`/challenges/${userChallenge.challengeId.id}`} className=\"no-decoration\">\n              <div className=\"challenge-summary row mx-2 px-3 justify-content-start\">\n                <div className=\"col-6 p-0\">\n                  <img className=\"user-challenge-img\" src={userChallenge.challengeId.photo} alt={userChallenge.challengeId.id}></img> \n                </div>\n                <div className=\"col-6 p-0 challenge-descrp\">\n                  <div className=\"h6\">{userChallenge.challengeId.title}</div>\n                  <div >\n                    <span><small>Creado por:</small></span>\n                    <div className=\"my-1\">\n                      <img className=\"rounded-circle avatar-user\" src={challengeOwner.avatarURL} alt={challengeOwner.nickName}></img>\n                      <span className=\"mx-1 pl-1\"><strong>{challengeOwner.nickName}</strong></span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Link>\n            }\n\n              <div className=\"d-flex justify-content-center mt-3\">\n                <p className=\"pr-2\">Unido al reto el</p>\n                <Moment className=\"h6\" format=\"DD/MM/YYYY\">{userChallenge.createdAt}</Moment>\n              </div>\n\n              <h6>Logros</h6>\n              <div className=\"row py-2 scroll-container\">\n                { ( !isFinished ) &&\n                  <div className=\"add-evidence-btn\" onClick={this.onClickEvidenceForm}>\n                    <i className=\"fas fa-plus-circle text-white\"></i>\n                  </div>\n                }\n                { evidences && evidences.length === 0 && (\n                <div className=\"row ml-2\">\n                  <div className=\"default-card mr-2\"/>\n                  <div className=\"default-card mr-2\"/>\n                </div>\n                )}\n                { evidences && evidences.length > 0 && (\n                  <CardScroll \n                    items={evidences} \n                    type=\"evidence\"\n                    origin=\"userChallenge\"\n                    textAlternative=\"¡Vamos, comienza a postar tus retos!\" \n                    onDeleteEvidence={this.onDeleteEvidence}\n                    onShowModal={this.onShowModal}\n                    />\n                )}\n              </div>\n              \n              { ( this.state.isVisibleForm ) && (\n              <div>\n                <Box margin=\"large\">\n                  <Form onSubmit={this.handleSubmit}>\n                  \n                  <FileInput\n                    label=\"Foto o video del logro:\"\n                    form={form}\n                    name=\"fileEvidence\"\n                  />\n    \n                  <InputField\n                    label=\"Comentarios:\"\n                    placeholder=\"Uff... ha sido difícil pero lo he conseguido!\"\n                    type=\"search\"\n                    {...getFieldProps('comments', {\n                      initialValue: '',\n                      validateFirst: true,\n                      validateTrigger: 'onblur'\n                    })}\n                    errors={getFieldError('comments')}\n                  />\n    \n                  {errors && Object.keys(errors).length > 0 && (\n                    Object.keys(errors).map((key, index) => (\n                    <Box key={index}>\n                      <Text \n                        alignSelf=\"center\"\n                        size=\"small\" \n                        color=\"status-error\" \n                        margin={{top: \"medium\", left:\"small\"}}>\n                        {getErrorText(errors[key].message)}\n                      </Text>\n                    </Box>\n                  )) \n                )}\n    \n                  <Button \n                  type=\"submit\" primary label=\"Añadir logro\" margin={{top: \"medium\", bottom: \"small\"}} fill />\n    \n                </Form>\n              </Box>\n              </div>\n              )}\n\n            <div className=\"d-flex justify-content-center mt-3 pt-2\">\n              { ( currentEvidences > 1 ) && (\n                <p className=\"mb-4\">Faltan { currentEvidences } logros para superar el reto</p>\n              )}\n              { ( currentEvidences === 1 ) && (\n                <p className=\"mb-4\">Falta { currentEvidences } logro para superar el reto</p>\n              )}\n              { ( currentEvidences === 0 ) && (\n                <p className=\"mb-4 h5 font-weight-bold text-danger\">Reto superado!</p>\n              )}\n            </div>\n\n            <div className=\"achievement\">\n              <div><img src={getIconText(\"hen\")} alt=\"hen\" style={opacityHen}/></div>\n              <div className=\"pl-1 pr-2\">\n                <ProgressBar gradient={ ( rangeValue === 0 ) ? 90 : 100 - (rangeValue * 100) }/>\n              </div>\n              <div><img src={getIconText(\"viking\")} alt=\"viking\" style={opacityViking}/></div>\n            </div>\n          </div>\n        );\n    }\n  }\n\nexport default createForm()(UserChallenge);","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Image, Box, Stack } from  'grommet';\n\nconst ChallengesScroll = (props) => {\n  \n  const items = (items) => \n    items.map(item => \n      <Stack key={item.id} anchor='center' className=\"images-content img-challenge-size mx-1\">\n        <Box height=\"small\" width=\"medium\" className=\"img-challenge-size\">\n          <Image className=\"h-100 w-100 rounded img-board-chg\" alignSelf=\"center\" key={item.id} src={item.photo} />\n        </Box>\n        <Link to={{\n          pathname: `/challenges/${item.id}`,\n          ...item }} >\n          <h5 className=\"link text-white text-center\"><strong>{item.title.toUpperCase()}</strong></h5>\n        </Link>\n      </Stack>\n    )\n\n  return ( \n    <div className=\"images-scroll px-1\">\n      {items(props.items)}\n    </div>\n  )\n}\n\nexport default ChallengesScroll;","import React from 'react';\n\nconst TextCustom = (props) => (\n  <h6 className=\"my-0 ml-2\">{props.children}</h6>\n)\n\nexport default TextCustom;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport TextCustom from '../../ui/TextCustom';\n\nconst LabelAndButton = (props) => {\n\n  const { items, link, type, sort, label } = props\n\n  return (\n    <div className=\"row align-items-center justify-content-between my-0 pr-3 pl-1\">\n      <TextCustom>{label}</TextCustom>\n        <Link to={{ pathname: link,\n              items, type, sort }}>\n          <div className=\"see-more-btn\">\n            <p className=\"my-0 mx-1\">ver</p>\n            <i className=\"fas fa-plus icon-plus my-0 mx-1\"></i>\n          </div>\n        </Link>\n    </div>)\n}\n\nexport default LabelAndButton;\n\n","import React, { Component } from 'react';\nimport challengesService from '../../services/challengesService';\nimport userChallengesService from '../../services/userChallengesService';\nimport ChallengesScroll from './ChallengesScroll';\nimport LabelAndButton from './LabelAndButton';\nimport Modal from '../misc/Modal';\nimport CardsRow from '../../ui/CardsRow';\nimport EvidencesModal from '../../ui/EvidencesModal';\n\nclass Board extends Component {\n\n  state = {\n    challenges: [],\n    userChallenges: [],\n    showModal: false,\n    itemToShow: {},\n    modalOrder: 0,\n    userChallengesPending: []\n  }\n\n\n  componentDidMount = () => {\n\n    const p1 = challengesService.getChallenges();\n    const p2 = challengesService.getUserChallenges();\n    const p3 = userChallengesService.getUserChallengesPending();\n    Promise.all([p1, p2, p3])\n      .then(([challenges, userChallenges, userChallengesPending]) => \n        this.setState({\n        challenges: challenges,\n        userChallenges: userChallenges,\n        userChallengesPending\n        }))    \n  }\n\n  topChallenges = () => this.state.challenges\n    .sort((a, b) => b.likes - a.likes)\n    .slice(0, 10);\n\n\n  topUserChallenges = () => this.state.userChallenges\n    .sort((a, b) => b.likes - a.likes)\n    .slice(0, 10);\n  \n\n  latestUserChallenges = () => this.state.userChallenges\n    .sort((a, b) => {\n      return (Date.parse(b.evidences[b.evidences.length - 1].createdAt) - Date.parse(a.evidences[a.evidences.length - 1].createdAt) > 0) ? 1 : -1 \n    })\n    .slice(0, 10);\n\n  onShowModal = (order, itemId) => {\n    const item = this.state.userChallenges.filter( userChallenge => userChallenge.id === itemId ); \n    this.setState({\n      ...this.state,\n      showModal: !this.state.showModal,\n      modalOrder: ( order >= 0 ) ? order : this.state.modalOrder,\n      itemToShow: item[0]\n    })\n  }\n  \n\n  render() {\n    const { challenges, userChallenges, itemToShow, modalOrder } = this.state;\n\n    return (\n      <div className=\"container mt-2\">\n      \n        {this.state.showModal && (\n          <Modal>\n            <EvidencesModal title={itemToShow.challengeId.title} \n                            propAvatar={itemToShow.userId.avatarURL} \n                            propNickname={itemToShow.userId.nickName} \n                            evidences={itemToShow.evidences} \n                            modalOrder={modalOrder}\n                            onShowModal={this.onShowModal}\n            />\n          </Modal>\n        )}\n\n        <LabelAndButton \n          label=\"Top Retos\"\n          items={challenges}\n          type=\"challenge\"\n          sort=\"likes\"\n          link=\"/search\"\n          labelButton=\"Más\"\n          />\n        <div className=\"row py-2\">\n          <div className=\"col cards-scroll user-challenge-scroll mx-1 pl-1 pr-2\">\n            <ChallengesScroll items={this.topChallenges()} className=\"content\" />\n          </div>\n        </div>\n        \n        <LabelAndButton \n          label=\"Logros más recientes\"\n          items={userChallenges}\n          link=\"/search\"          \n          type=\"userChallenge\"\n          sort=\"createDate\"\n          labelButton=\"Más\"\n        />\n\n        {console.log(\"\\n\\nultimoss \", this.latestUserChallenges())}\n       \n        {userChallenges.length && <CardsRow \n          items={this.latestUserChallenges()} \n          type=\"userChallenge\" \n          origin=\"board\"\n          textAlternative=\"Nadie aún con Webos de subir su logro...\" \n          onShowModal={this.onShowModal}\n        />}\n         \n\n        <LabelAndButton \n          label=\"Logros más virales\"\n          items={userChallenges}\n          link=\"/search\"          \n          type=\"userChallenge\"\n          sort=\"views\"\n          labelButton=\"Más\"\n        />\n            \n        {userChallenges.length && <CardsRow \n          items={this.topUserChallenges()} \n          type=\"userChallenge\" \n          origin=\"board\"\n          textAlternative=\"Nadie aún con Webos de subir su logro...\" \n          onShowModal={this.onShowModal}\n        />}   \n      </div>\n    )\n  }\n}\n\nexport default Board;\n","import React, { Component } from 'react';\n\nconst SearchContext = React.createContext();\n\nclass SearchStore extends Component {\n  state = {\n    search: ''\n  }\n\n  handleSearchChange = (keyword) => {\n    this.setState({\n      ...this.state,\n      search: keyword\n    })\n  }\n\n  render() {\n    return (\n      <SearchContext.Provider value={{\n        search: this.state.search,\n        onSearchChange: this.handleSearchChange \n      }}>\n        {this.props.children}\n      </SearchContext.Provider>\n    )\n  }\n}\n\nconst withSearchConsumer = (Component) => {\n  return (props) => (\n    <SearchContext.Consumer>\n      {(storeProps) => <Component {...props} {...storeProps} />}\n    </SearchContext.Consumer>\n  )\n}\n\n\nexport { SearchStore, SearchContext, withSearchConsumer }","import React from 'react';\nimport { FormSearch } from 'grommet-icons';\nimport { Box, TextInput, Button } from 'grommet';\nimport { withSearchConsumer } from '../context/SearchStore';\n\nconst InputSearch = (props) => {\n\n  const handleSearch = (event) => {\n    props.onSearchChange(event.target.value);\n  }\n\n  return (\n    <Box className=\"my-search-bar\"\n    direction=\"row\"\n    margin=\"xsmall\"\n    align=\"center\"\n    round=\"large\"\n    border\n    size=\"\"\n    >\n    <TextInput\n      plain\n      placeholder=\"Buscar...\"\n      value={props.search}\n      onChange={handleSearch}\n    />\n    <Button\n      icon={<FormSearch size=\"medium\" />}\n      \n    />\n    </Box>\n\n  )\n}\n\nexport default withSearchConsumer(InputSearch);\n\n\n","import React, { Component} from 'react';\nimport { Link, withRouter, Redirect } from 'react-router-dom';\nimport authService from '../../services/authService';\nimport userChallengesService from '../../services/userChallengesService';\nimport icons from '../../utils/icons.json';\nimport InputSearch from '../../ui/InputSearch';\n\n\nconst getIconText = text => icons[text];\n\n\n\nclass NavBar extends Component {\n  state = {\n    user: {},\n    userChallengesPending: []\n  }\n\n  userSubscription = {};\n  usersChallengesPendingSubscription = undefined;\n\n  componentDidMount() {\n    // let userAux = {};\n    // let userChallengesPendingAux = [];\n    \n    this.userSubscription = authService.onUserChange().subscribe((user) => {\n      this.setState({\n        user\n      })\n    });\n\n    this.userChallengesPendingSubscription = userChallengesService.onUserChallengesPendingChange().subscribe((userChallengesPending) => {\n      this.setState({\n        userChallengesPending: userChallengesPending\n      })\n    });\n\n    // console.log(\"\\n\\n\\nlas notif pendientes son: \", userChallengesPendingAux)\n    // this.setState({\n    //   ...this.state,\n    //   user: userAux,\n    //   userChallengesPending: userChallengesPendingAux\n    // })\n  }\n\n  componentWillUnmount() {\n    this.userSubscription.unsubscribe();\n    this.userChallengesPendingSubscription.unsubscribe()\n  }\n\n  handleLogout = () => {\n    authService.logout()\n      .then(() => {\n        //return <Redirect to=\"/login\" />\n        this.props.history.push('/login')\n      })\n  }\n\n  render() {\n    const { user, userChallengesPending } = this.state;\n    const { pathname } = this.props.history.location;\n\n    if ( pathname === '/login' || pathname === '/register') {\n      return null;\n    } else {\n      \n      return (\n      <div className=\"pos-f-t\">\n        <nav className=\"navbar navbar-dark nav-bar-bg\">\n          <div className=\"profile-container\">\n            <Link to=\"/profile\">\n              <div className=\"nav-bar-img-div\">\n                <img className=\"nav-bar-img\" src={user.avatarURL} alt={user.nickName}></img>\n              </div>\n            </Link>\n            { !pathname.startsWith('/search') && <span>{user.nickName}</span> }\n          </div>\n\n          { pathname.startsWith('/search') && <InputSearch />}\n\n  \n          <div className=\"dropdown\">\n            <button \n                    className=\"navbar-toggler\" \n                    id=\"dropdownMenuLink\" \n                    type=\"button\" \n                    data-toggle=\"dropdown\"\n                    aria-haspopup=\"true\" \n                    aria-expanded=\"false\"\n            >\n            {userChallengesPending.length \n              && <small className=\"badge badge-danger\">AVISO</small>}\n            <img className=\"navbar-icon\" src={getIconText(\"eggs\")} alt=\"eggs\" ></img>\n          </button>      \n  \n            <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownMenuLink\">\n              {<button className=\"dropdown-item\" onClick={this.handleLogout}>Logout</button>}\n              <Link className=\"dropdown-item\" to=\"/notifications\">Mis notificaciones<small className=\"badge badge-danger\">AVISO</small></Link>\n              <Link className=\"dropdown-item\" to=\"#\">Something else here</Link>\n            </div>\n          </div> \n        </nav>\n      </div>\n      )\n    }\n  }\n}\n\nexport default withRouter(NavBar);","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst IconCustom = (props) => {\n\n  const { icon, link, color, onClick} = props\n\n  const handleClick = (event) => {\n   \n    onClick && onClick(event.target.value);\n  }\n\n  return (\n    <Link to={link} className={color}>\n      <div className=\"col align-items-center\">\n        {/* <Car size=\"large\" color=\"light-2\" /> */}\n        <p className=\"m-0 p-0\" onClick={handleClick}><i className={icon}></i></p>\n        {/* <i class=\"fas fa-search\"></i> */}\n        {/* <p className=\"m-0 p-0\">{name}</p> */}\n      </div>\n    </Link>\n  )\n}\n\nexport default IconCustom;","import React from 'react';\nimport IconCustom from '../../ui/IconCustom';\nimport { withRouter } from 'react-router-dom';\n\nconst FooterBar = (props) => {\n\n  const { pathname } = props.history.location;\n\n  const handleComeBack = (event) => {\n    console.log(\"clikado boton de volver\")\n    props.history.goBack();\n  }\n\n  if ( pathname === '/login' || pathname === '/register') {\n    return null;\n  } else {\n    return(\n      <div className=\"container m-0 p-0\">\n        <div className=\"footer-bar row m-0 p-0 justify-content-center align-items-center\">\n          {/* <div onClick={handleComeBack}><i className=\"fas fa-arrow-left text-white\"></i></div> */}\n          <IconCustom name=\"Volver\" icon=\"fas fa-arrow-left\" onClick={handleComeBack} link=\"#\" color=\"text-white\" />\n          <IconCustom name=\"Buscar\" icon=\"fas fa-search\" link=\"/search\" color=\"text-white\" />\n          <IconCustom name=\"Home\" icon=\"fas fa-home\" link=\"/board\" color=\"text-white\" />\n          <IconCustom name=\"CrearReto\" icon=\"fas fa-plus\" link=\"/challenges/create\" color=\"text-white\" />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(FooterBar);","import React from 'react';\nimport { Select, FormField } from 'grommet';\nimport { SELECT_TYPES, SELECT_SORTS, } from '../../constants';\n/* import SelectCustom from '../../ui/SelectCustom'; */\n\nconst SearchFilters  = (props) => {\n\n  const handleChangeType = (event) => {\n    props.onChangeType(event.option);\n  }\n\n  const handleChangeSort = (event) => {\n    props.onChangeSort(event.option);\n  }\n\n  return (\n    <div className=\"row px-2 mt-4\">\n\n      <div className=\"col-4\">\n{/*         //He intentato hacer un componente para no repetirlo, y simplemente llamarlo 2 veces, pero de moemnto no ha funcionado..\n */}        {/* <SelectCustom\n          title=\"Filtrar por\"\n          content={SELECT_TYPES[props.type]}\n          handleChange={handleChangeType}\n          choices={Object.values(SELECT_TYPES)}\n        /> */}\n        <label className=\"mb-1 p-0\">Filtrar por: </label>\n        <FormField className=\"m-0 p-0\">\n          <Select\n            className=\"m-0 p-1\"\n            size=\"small\"\n            value={SELECT_TYPES[props.type]}\n            onChange={handleChangeType}\n            options={Object.values(SELECT_TYPES)}\n          />\n        </FormField>\n      </div>\n      <div className=\"col-4\">\n          <label className=\"mb-1 p-0\">Ordenar por: </label>\n        <FormField className=\"m-0 p-0\">\n          <Select\n            className=\"m-0 p-1\"\n            size=\"small\"\n            value={SELECT_SORTS[props.sort]}\n            onChange={handleChangeSort}\n            options={Object.values(SELECT_SORTS)}\n          />\n        </FormField>\n      </div>\n    </div>\n  )\n}\n\nexport default SearchFilters;\n\n","import React, { Fragment, Component } from 'react';\nimport { Redirect, withRouter, Link } from 'react-router-dom'\nimport {LIMIT_DESCRIPTION, LIMIT_TITLE } from '../../constants';\nimport $ from 'jquery';\nimport challengeService from '../../services/challengesService';\nimport authService from '../../services/authService';\nimport { withAuthConsumer } from '../../context/AuthStore';\nimport Moment from 'react-moment';\nimport 'moment-timezone';\n\n\nclass SearchItem extends Component {\n\n  state = {\n    info: this.props,\n    redirectToDetail: false\n  }\n\n\n  componentDidMount() {\n\n      authService.getSession()\n        .then(user => {\n          let itemsLiked;\n          (this.state.info.type === 'challenge') ? itemsLiked = [...user.challengesLiked] : itemsLiked = [...user.userChallengesLiked];\n          this.setState({\n            ...this.state,\n            itemsLiked\n          })\n        })\n  }\n\n\n  formattedFields = () => {\n\n    let formatedProps  = {...this.state.info}\n    formatedProps.description = (formatedProps.description.length > LIMIT_DESCRIPTION) ?\n      (`${formatedProps.description.slice(0, LIMIT_DESCRIPTION)} [...]`) : formatedProps.description;\n    formatedProps.title = (formatedProps.title.length > LIMIT_TITLE) ?\n      (`${formatedProps.title.slice(0, LIMIT_TITLE)} [...]`) : formatedProps.title;\n    return formatedProps;\n  }\n\n\n  // goToDetail = () => {\n  //   const { id, type } = this.state.info\n  //   const actionType = (type ==='challenge') ? challengeService.addViewToChallenge(id) : challengeService.addViewToUserChallenge(id);\n  //   actionType\n  //     .then(() => {\n  //       this.setState({ redirectToDetail: true })\n  //     })\n\n\n  //     this.props.onShowModal(id)\n  // }\n\n  goToDetail = () => {\n    const { id, type } = this.state.info\n    const actionType = (type ==='challenge') ? challengeService.addViewToChallenge(id) : challengeService.addViewToUserChallenge(id);\n    actionType\n      .then(() => {\n        ( type === 'userChallenge' ) ? this.props.onShowModal(id) : this.setState({ redirectToDetail: true })\n      })\n  }\n\n    \n\n  toggleIcon = (event) => {\n\n    const handleAddLikeToChallenge = (id) => {\n      challengeService.addChallengeToLikes(id)\n        .then((response) => {\n          const {likes, itemsLiked} = response\n          this.setState({\n            ...this.state,\n            itemsLiked,\n            info: {\n              ...this.state.info,\n              likes \n            }\n          })\n        })       \n    }\n\n    const handleAddLikeToUserChallenge = (id) => {\n      challengeService.addUserChallengeToLikes(id)\n        .then((response) => {\n          const {likes, itemsLiked} = response\n          this.setState({\n            ...this.state,\n            itemsLiked,\n            info: {\n              ...this.state.info,\n              likes \n            }\n          })\n        })\n    }\n\n    const handleRemoveLikeFromChallenge = (id) => {\n      challengeService.removeChallengeFromLikes(id)\n        .then((response) => {\n          const {likes, itemsLiked} = response\n          this.setState({\n            ...this.state,\n            itemsLiked,\n            info: {\n              ...this.state.info,\n              likes \n            }\n          })\n        })\n    }\n      \n    const handleRemoveLikeFromUserChallenge = (id) => {\n      challengeService.removeUserChallengeFromLikes(id)\n        .then((response) => {\n          const {likes, itemsLiked} = response\n          this.setState({\n            ...this.state,\n            itemsLiked,\n            info: {\n              ...this.state.info,\n              likes \n            }\n          })\n        })\n    }\n\n    const { type, id } = this.state.info;\n    const { itemsLiked } = this.state\n\n    if (this.objectIdInArray(id, itemsLiked)) {\n      $(event.target).removeClass(\"icon-selected\");\n      switch (type) {\n        case 'challenge': {\n          handleRemoveLikeFromChallenge(id);\n          break;\n        }\n        case 'userChallenge': {\n          handleRemoveLikeFromUserChallenge(id);\n          break;\n        }\n        default:\n      }\n    } else {\n      $(event.target).addClass(\"icon-selected\");\n      switch (type) {\n        case 'challenge': {\n          handleAddLikeToChallenge(id);\n          break;\n        }\n        case 'userChallenge': {\n          handleAddLikeToUserChallenge(id);\n          break;\n        }\n        default:\n      }\n    }\n  }\n\n\n  objectIdInArray = (objId, arr) => {\n   \n    let arrAux = arr.map(objId => JSON.stringify(objId))\n    let objIdAux = JSON.stringify(objId);\n    return (arrAux.includes(objIdAux))\n  }\n\n  \n  render() {\n    const formattedProps = this.formattedFields();\n    const { type, id, title, description, userName, avatarURL, views, likes, file, createdAt, userId } = formattedProps;\n\n    const { itemsLiked, redirectToDetail } = this.state;\n\n    if (redirectToDetail) {\n      if (type === 'challenge') {\n        return <Redirect to={`/challenges/${id}/`} />\n      } \n    }\n\n    return (\n      <Fragment>\n        {<div className=\"media align-items-center mx-0 my-2 border rounded-lg row card-search\">\n          \n            <div className=\"col-3 p-0\" onClick={this.goToDetail}>\n          {/* <Link to={`/challenges/${id}`} className=\"w-auto m-0\">\n              <img src={file} className=\"w-100 img-in-search rounded-lg\" alt=\"...\" />\n          </Link> */}\n              <img src={file} className=\"w-100 img-in-search rounded-lg\" alt=\"...\" />\n            </div>  \n          <div className=\"media-body col-9 p-0\">\n            <div className=\"d-flex justify-content-between\">\n              <div className=\"px-2 col-9 card-media-item\">\n                <h6 className=\"m-0 my-1\" data-container=\"body\" data-toggle=\"popover\" data-placement=\"top\" data-content={this.state.info.title}><u>{title}</u></h6>\n                <p className=\"m-0\" data-container=\"body\" data-toggle=\"popover\" data-placement=\"bottom\" data-content={this.state.info.description}>{description}</p>\n                <div className=\"m-0 my-1 d-flex justify-content-between align-items-center\">\n                  <Link to={`/profile/${userId}`} className=\"m-0 p-0\">\n                    <img className=\"rounded-circle avatar-user\" src={avatarURL} alt={id} />\n                    <span className=\"mx-1\"><small><strong>{userName}</strong></small></span>\n                  </Link>\n                  <div>\n                    <small className=\"p-0 m-0\"><Moment format=\"DD/MM/YYYY\">{createdAt}</Moment></small>\n                  </div>\n                </div>\n              </div>\n              <div className=\"px-1 col-3 text-center card-media-item\">\n                <div className=\"align-content-between\">\n                  <p className=\"m-0 my-1 row align-items-center icon-unselected\">\n                    <i className=\"fas fa-eye col p-0\"></i>\n                    <span className=\"mx-1 p-0 col text-left font-weight-bold\">{views}</span>\n                  </p>\n                  <p className={`m-0 my-1 row align-items-center ${(itemsLiked && this.objectIdInArray(id, itemsLiked)) ? 'icon-selected' : 'icon-unselected'}`} onClick={this.toggleIcon}>\n                    <i className=\"fas fa-thumbs-up col p-0\"></i>\n                    <span className=\"mx-1 p-0 col text-left font-weight-bold\">{likes}</span>\n                  </p>\n                </div> \n                <p className=\"m-0 my-1 icon-unselected\"><i className=\"fas fa-exclamation-triangle\"></i></p>\n              </div>\n            </div>\n          </div>\n        </div>}\n      </Fragment>\n    )\n  }\n}\n\nexport default withRouter(withAuthConsumer(SearchItem));","import React, { Component, Fragment } from 'react';\nimport { withRouter } from 'react-router-dom';\n//import challengeService from '../../services/challengesService';\nimport SearchItem from './SearchItem';\nimport { withSearchConsumer } from '../../context/SearchStore';\nimport { listByFilters } from '../../utils/handleLogicSelects';\n\n\nclass SearchItemsList extends Component {\n\n  state = {\n    challenges: [],\n    userChallenges: [this.props.userChallenges]\n  }\n\n  componentDidMount() {\n    this.setState({\n    challenges: this.props.challenges,\n    userChallenges: this.props.userChallenges\n    })\n  }\n\n  // challengesSubscription = undefined;\n  // userChallengesSubscription = undefined;\n\n\n  // componentDidMount() {\n\n  //   this.challengesSubscription = challengeService\n  //     .onChallengesChange()\n  //     .subscribe(challenges => {\n  //       this.setState({challenges: challenges});\n  //     })\n\n  //   this.userChallengesSubscription = challengeService\n  //     .onUserChallengesChange()\n  //     .subscribe(userChallenges => {\n  //       this.setState({userChallenges: userChallenges});\n  //     })\n  // }\n\n\n  // componentWillUnmount() {\n  //   this.challengesSubscription.unsubscribe();\n  //   this.userChallengesSubscription.unsubscribe();\n  // }\n\n\n  listChallenges = (items) => {\n\n    return items\n    .filter(challenge => challenge.title.toLowerCase().includes(this.props.search.toLowerCase()))\n      .map(challenge => {\n        const info = {\n          type: 'challenge',\n          id: challenge.id,\n          title: challenge.title,\n          description: challenge.description,\n          userId: challenge.owner.id,\n          userName: challenge.owner.nickName,\n          avatarURL: challenge.owner.avatarURL,\n          views: challenge.views,\n          likes: challenge.likes,\n          file: challenge.photo,\n          createdAt: challenge.createdAt\n        }\n        return <SearchItem key={info.id} {...info} onReprint={this.handleReprint}/>\n      })\n    }\n\n\n  listUserChallenges = (items) => {\n\n    return items\n      .filter(userChallenge => userChallenge.challengeId.title.toLowerCase().includes(this.props.search.toLowerCase()))\n      .map(userChallenge => {\n        const info = {\n          type: 'userChallenge',\n          id: userChallenge.id,\n          title: userChallenge.challengeId.title,\n          description: userChallenge.challengeId.description,\n          userId: userChallenge.userId.id,\n          userName: userChallenge.userId.nickName,\n          avatarURL: userChallenge.userId.avatarURL,\n          views: userChallenge.views,\n          likes: userChallenge.likes,\n          file: userChallenge.evidences[0].file  ,\n          createdAt: userChallenge.evidences[0].createdAt    \n        }\n        return <SearchItem key={info.id}\n                           {...info} \n                           onReprint={this.handleReprint}\n                           onShowModal={this.props.onShowModal}/>\n    })\n  }\n  \n\n  render() {\n    const { type, sort } = this.props;\n    const { challenges, userChallenges } = this.props;\n    return (\n      <Fragment>\n        {(type === \"challenge\") ? \n          this.listChallenges(listByFilters(challenges, type, sort)) \n          : this.listUserChallenges(listByFilters(userChallenges, type, sort))}\n      </Fragment>\n    )\n  }\n}\n\nexport default withRouter(withSearchConsumer(SearchItemsList));\n\n","import React, { Component } from 'react';\nimport SearchFilters from './SearchFilters';\nimport { MIRROR_SELECT_TYPES, MIRROR_SELECT_SORTS } from '../../constants';\nimport SearchItemsList from './SearchItemsList';\nimport Modal from '../misc/Modal';\nimport EvidencesModal from '../../ui/EvidencesModal';\nimport challengeService from '../../services/challengesService';\n\n\nclass Search extends Component {\n\n  state = {\n    challenges: [],\n    userChallenges: [],\n    type: (this.props.location.type) || 'challenge',\n    sort: (this.props.location.sort) || 'likes',\n    showModal: false,\n    itemToShow: {},\n  }\n\n  challengesSubscription = undefined;\n  userChallengesSubscription = undefined;\n\n\n  componentDidMount() {\n\n    this.challengesSubscription = challengeService\n      .onChallengesChange()\n      .subscribe(challenges => {\n        this.setState({challenges: challenges});\n      })\n\n    this.userChallengesSubscription = challengeService\n      .onUserChallengesChange()\n      .subscribe(userChallenges => {\n        this.setState({userChallenges: userChallenges});\n      })\n  }\n\n\n  componentWillUnmount() {\n    this.challengesSubscription.unsubscribe();\n    this.userChallengesSubscription.unsubscribe();\n  }\n\n\n  handleChangeType = (type) => { \n    this.setState({\n      ...this.state,\n      type: MIRROR_SELECT_TYPES[type]\n    });\n  }\n\n  handleChangeSort = (sort) => { \n    this.setState({\n      ...this.state,\n      sort: MIRROR_SELECT_SORTS[sort]\n    });\n  }\n\n  onShowModal = (itemId) => {\n    const item = this.state.userChallenges.filter( userChallenge => userChallenge.id === itemId );\n    this.setState({\n      ...this.state,\n      showModal: !this.state.showModal,\n      itemToShow: item[0]\n    })\n    console.log(\"el item es:\", this.state.itemToShow); \n  }\n\n\n  render() {\n   \n    const { type, sort, itemToShow, modalOrder } = this.state;\n    return (\n      <div className=\"container\">\n\n        {this.state.showModal && (\n          <Modal>\n            <EvidencesModal title={itemToShow.challengeId.title} \n                            propAvatar={itemToShow.userId.avatarURL} \n                            propNickname={itemToShow.userId.nickName} \n                            evidences={itemToShow.evidences} \n                            modalOrder={modalOrder}\n                            onShowModal={this.onShowModal}\n            />\n          </Modal>\n        )}\n\n        <SearchFilters \n          onChangeType={this.handleChangeType}\n          onChangeSort={this.handleChangeSort}\n          type={type}\n          sort={sort}\n        />\n        <SearchItemsList {...this.state} onShowModal={this.onShowModal}/>\n      </div>\n    )\n  }\n}\n\nexport default Search;\n","import React from 'react';\nimport Select from 'react-select';\n\nconst Ejemplo = () => {\n\n\n  const opciones = [\n    {label:\"vero\", value: 1, sorpresa: \"#\"},\n    {label:\"sergiosdsdadasdadasfdfaddddddddddddddddddddddddddddddddddddddd\", value: 2, sorpresa: \"%%%\"},\n    {label:\"jesus\", value: 3, sorpresa: \"t\"},\n    {label:\"rodri\", value: 4, sorpresa: \"y\"}\n  ]\n\n\n  return (\n    <Select\n      options={opciones}\n      isMulti\n      isSearchable\n    />\n  \n  )\n}\n\nexport default Ejemplo;","import React from 'react'\nimport { withAuthConsumer } from '../context/AuthStore'\nimport { Redirect, Route } from 'react-router-dom';\n\nconst PrivateRoute = ({ component: Component, isAuthenticated, ...rest }) => {\n  if (!isAuthenticated()) {\n    return <Redirect to=\"/forbidden\" />\n  }\n  return (\n    <Route {...rest} component={Component} />\n  );\n}\n\nexport default withAuthConsumer(PrivateRoute);\n\n\n/* import React from 'react'\nimport { AuthContext } from '../context/AuthStore'\nimport { Redirect, Route } from 'react-router-dom';\n\n\nconst PrivateRoute = ({component: Component, ...rest}) => {\n  return (\n    <AuthContext.Consumer>\n      {( { isAuthenticated, user } ) => {\n      console.log(\"ESTOY EN RUTA PRIVADA con el user\", user)\n      return <Route {...rest} render={ (props) => {\n        if (isAuthenticated()) {\n          return (<Component {...props} />);\n        } else {\n          return <Redirect to=\"/login\" />; \n        } \n      }}/>\n      }}\n    </AuthContext.Consumer>\n  );\n}\n\nexport default PrivateRoute; */\n\n\n\n/* import React from 'react'\nimport { AuthContext } from '../contexts/AuthStore';\nimport { Redirect, Route } from 'react-router-dom';\n\n\nconst PrivateRoute = ({component: Component, ...rest}) => {\n\n  return (\n    <Route {...rest} component={Component} />\n  );\n}\n\nexport default withAuthConsumer(PrivateRoute);*/","import 'dotenv';\nimport React, { Component } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom'\nimport Register from './components/auth/Register';\nimport Login from './components/auth/Login';\nimport Profile from './components/auth/Profile';\nimport ChallengeDetail from './components/challenges/ChallengeDetail';\nimport ChallengeCreate from './components/challenges/ChallengeCreate';\nimport UserChallenge from './components/userChallenges/UserChallenge';\nimport Board from './components/board/Board';\nimport NavBar from './components/misc/NavBar';\nimport FooterBar from './components/misc/FooterBar';\nimport Search from '../src/components/search/Search';\nimport PrivateRoute from './guards/PrivateRoute';\nimport Ejemplo from './components/misc/selectPrueba';\n\n\nclass App extends Component {\n\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"container-fluid p-0\">\n          <NavBar />\n          <FooterBar />\n        </div>\n        <div className=\"container-fluid px-0 py-1 margin-main-container\">\n          <Switch>\n            {/* esto va guay, pero vamos a probar protegiendo rutas */}\n            <Route exact path=\"/register\" component={Register} />\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/board\" component={Board} />\n            <Route exact path=\"/profile\" component={Profile}/>\n            <Route exact path=\"/profile/:userId\" component={Profile}/>\n            <Route exact path=\"/search\" component={Search} />\n            <Route exact path=\"/challenges/create\" component={ChallengeCreate} />\n            <Route exact path=\"/challenges/:challengeId\" component={ChallengeDetail} />\n            <Route exact path=\"/user-challenges/:userChallengeId\" component={UserChallenge} />\n            <Route exact path=\"/notifications\" component={Notification} />\n            <Route exact path=\"/ejemplo\" component={Ejemplo} />\n            <Redirect to=\"/board\" />\n\n\n\n            {/* //He intentado las rutas privadas pero siempre isAuthenticated es undefinde...me he vuelto loco y no he dado con ello aún */}\n           {/*  <Route exact path=\"/register\" component={Register} />\n            <Route exact path=\"/login\" component={Login} />\n            <PrivateRoute exact path=\"/board\" component={Board} />\n            <PrivateRoute exact path=\"/profile\" component={Profile}/>\n            <PrivateRoute exact path=\"/profile/:userId\" component={Profile} />\n            <PrivateRoute exact path=\"/search\" component={Search} />\n            <PrivateRoute exact path=\"/challenges/create\" component={ChallengeCreate} />\n            <PrivateRoute exact path=\"/challenges/:challengeId\" component={ChallengeDetail} />\n            <PrivateRoute exact path=\"/user-challenges/:userChallengeId\" component={UserChallenge} /> */}\n            {/* <PrivateRoute exact path=\"/admin\" role={\"admin\"} component={AdminMessage} />\n            <Route exact path=\"/forbidden\" component={Forbidden}/>\n            <Route exact path=\"/not-found\" component={NotFound}/>\n            <Redirect to=\"/not-found\"/> */}\n\n\n\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const customTheme = {\n  global: {\n    font: {\n    family: 'Roboto',\n    size: '14px',\n    height: '20px',\n    },\n    colors: {\n      brand: '#b1e3fa',\n      neutral: \"#ebf9ff\"\n    }\n  },\n  button: {\n    border: {\n      radius: \"10px\"\n    }\n  }\n}\n\nexport default customTheme;\n","import 'dotenv';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Grommet } from 'grommet';\nimport customTheme from './utils/theme-grommet'\nimport { BrowserRouter } from 'react-router-dom';\nimport 'moment-timezone';\nimport $ from 'jquery';\n\nimport { SearchStore } from '../src/context/SearchStore';\nimport { AuthStore } from './context/AuthStore';\n\n$(function () {\n  $('[data-toggle=\"popover\"]').popover()\n})\n\n\n\nReactDOM.render(\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <AuthStore>\n      <SearchStore>\n        <Grommet  theme={customTheme}>\n          <App />\n        </Grommet>\n      </SearchStore>\n    </AuthStore>\n  </BrowserRouter>,\n document.getElementById('root'));\nserviceWorker.unregister();\n"],"sourceRoot":""}